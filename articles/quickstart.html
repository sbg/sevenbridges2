<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="sevenbridges2">
<title>Introduction and Quickstart for Seven Bridges API R Client • sevenbridges2</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Introduction and Quickstart for Seven Bridges API R Client">
<meta property="og:description" content="sevenbridges2">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">sevenbridges2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Authentication_and_Billing.html">Authentication and Billing reference guide for Seven Bridges API R Client</a>
    <a class="dropdown-item" href="../articles/Files_upload_and_Volumes.html">File upload and Volumes reference guide for Seven Bridges API R Client</a>
    <a class="dropdown-item" href="../articles/Projects_and_Tasks_execution.html">Projects, Files, Apps and Tasks execution with Seven Bridges API R Client</a>
    <a class="dropdown-item" href="../articles/quickstart.html">Introduction and Quickstart for Seven Bridges API R Client</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/sbg/sevenbridges2/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Introduction and Quickstart for Seven Bridges API R Client</h1>
            
            <h4 data-toc-skip class="date">2023-12-19</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/sbg/sevenbridges2/blob/HEAD/vignettes/quickstart.Rmd" class="external-link"><code>vignettes/quickstart.Rmd</code></a></small>
      <div class="d-none name"><code>quickstart.Rmd</code></div>
    </div>

    
    
<p><a name="top"></a></p>
<p><code>Important note:</code> This is a work-in-progress project to
update the <code>sevenbridges2</code> package. Accordingly, this
vignette will also change as new features are implemented.</p>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p><code>sevenbridges2</code> is an R package that provides an interface
for the Seven Bridges public API. The supported platforms include the <a href="https://igor.sbgenomics.com/" class="external-link">Seven Bridges Platform</a>, <a href="https://www.cancergenomicscloud.org" class="external-link">Cancer Genomics Cloud
(CGC)</a>, <a href="https://platform.sb.biodatacatalyst.nhlbi.nih.gov/" class="external-link">BioData
Catalyst (BDC)</a> and <a href="https://cavatica.sbgenomics.com" class="external-link">CAVATICA</a>.</p>
<p>Learn more from our documentation on the <a href="https://docs.sevenbridges.com/page/api" class="external-link">Seven Bridges
Platform</a>, <a href="http://docs.cancergenomicscloud.org/v1.0/page/the-cgc-api" class="external-link">Cancer
Genomics Cloud (CGC)</a>, <a href="https://sb-biodatacatalyst.readme.io/reference/new-1" class="external-link">BioData
Catalyst (BDC)</a> and <a href="https://docs.cavatica.org/reference/the-api" class="external-link">CAVATICA</a>.</p>
<p>Unlike the current <code>sevenbridges</code> package that is built on
top of <a href="%22http://adv-r.had.co.nz/R5.html%22" class="external-link">Reference
classes</a>, the <code>sevenbridges2</code> package is based on more
modern and lightweight <a href="%22https://adv-r.hadley.nz/r6.html" class="external-link">R6</a> classes. However, the
basic idea and way of constructing API requests is largely
preserved.</p>
<div class="section level3">
<h3 id="r-client-for-the-seven-bridges-api">R Client for the Seven Bridges API<a class="anchor" aria-label="anchor" href="#r-client-for-the-seven-bridges-api"></a>
</h3>
<p>In order to use the <code>sevenbridges2</code> package users must
authenticate themselves first by creating an Auth object and providing
necessary credentials. You can read more about the authentication types
in our next chapters.</p>
<p>The <code>sevenbridges2</code> package only supports v2+ versions of
the API, since versions prior to v2 are not compatible with the Common
Workflow Language (CWL). This package provides a simple interface for
accessing and trying out various methods.</p>
</div>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>The <code>sevenbridges2</code> package is available on CRAN and Seven
Bridges Github repository.</p>
<p>To install it from <code>CRAN</code>, use simply:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install package from CRAN</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"sevenbridges2"</span><span class="op">)</span></span></code></pre></div>
<p>To install the development version from the <code>develop</code>
branch on our Github, use the <code>remotes</code> package:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install package from github</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span></span>
<span>  <span class="st">"sbg/sevenbridges2"</span>,</span>
<span>  build_vignettes <span class="op">=</span> <span class="cn">TRUE</span>, dependencies <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>If you have trouble with <code>pandoc</code> and do not want to
install it, set <code>build_vignettes = FALSE</code> to avoid the
vignettes build.</p>
</div>
<div class="section level3">
<h3 id="api-general-information">API General Information<a class="anchor" aria-label="anchor" href="#api-general-information"></a>
</h3>
<p>There are two ways of constructing API calls. For instance, you can
use low-level API calls which use arguments like <code>path</code>,
<code>query</code>, and <code>body</code>. These are documented in the
API reference libraries for the <a href="https://docs.sevenbridges.com/reference#list-all-api-paths" class="external-link">Seven
Bridges Platform</a> and the <a href="http://docs.cancergenomicscloud.org/docs/new-1" class="external-link">CGC</a>. An
example of a low-level request to “list all projects” is shown below. In
this request, you can also pass <code>query</code> and <code>body</code>
as a list.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load the package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://www.sevenbridges.com" class="external-link">"sevenbridges2"</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Authenticate</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Auth.html">Auth</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>token <span class="op">=</span> <span class="st">"&lt;your_token&gt;"</span>, platform <span class="op">=</span> <span class="st">"aws-us"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># List all projects with raw api() function</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="fu">api</span><span class="op">(</span>path <span class="op">=</span> <span class="st">"projects"</span>, method <span class="op">=</span> <span class="st">"GET"</span><span class="op">)</span></span></code></pre></div>
<p><strong><em>(Advanced user option)</em></strong> The second way of
constructing an API request is to directly use the <a href="https://httr2.r-lib.org/" class="external-link">httr2</a> package to make your API
calls.</p>
<p>The <code>sevenbridges2</code> package is organized by main resources
from the Seven Bridges API reference. There we have groups of endpoints
to work with projects, files, apps, tasks, invoices, volumes, etc. For
each group of resources, there is a set of operations such as
<code>query()</code>, <code><a href="https://rdrr.io/r/base/get.html" class="external-link">get()</a></code> and <code>delete()</code> which
are common, as well as other custom operations.</p>
<p>Before we start, keep in mind the following:</p>
<p><strong><code>offset</code> and <code>limit</code></strong></p>
<p>Almost every API call accepts two arguments named <code>offset</code>
and <code>limit</code>.</p>
<ul>
<li>Offset defines where the retrieved items start.</li>
<li>Limit defines the number of items you want to get.</li>
</ul>
<p>By default, <code>offset</code> is set to <code>0</code> and
<code>limit</code> is set to <code>50</code>. As such, your API request
returns the <strong>first 50 items</strong> when you list items or
search for items by name. To search and list all items, use
<code>complete = TRUE</code> if you are using the core
<code><a href="../reference/api.html">api()</a></code> function in your API request, or the
<code><a href="https://rdrr.io/r/base/all.html" class="external-link">all()</a></code> operation within the <code>Collection</code> object
you’ve received as the result.</p>
<p><strong><code>Collection</code></strong></p>
<p>Every API call that returns a list of items (usually the output from
<code>query()</code> operations), operations), like fetching projects,
files, apps etc, wraps the results into a general
<code>Collection</code> class object containing the <code>items</code>
field from which users may access the items returned. Additional options
that the <code>Collection</code> class offers are to navigate between
pages of results, for example, to load next or previous page of results
by calling <code>next_page()</code> and <code>prev_page()</code>
methods.</p>
<p>Moreover, users can fetch all results using <code>Collection</code>’s
<code><a href="https://rdrr.io/r/base/all.html" class="external-link">all()</a></code> method which is a shortcut to send multiple API calls
for each next page and collect all results. Keep in mind the
<code>limit</code> used, as well as the API rate limit.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a collection of files</span></span>
<span><span class="va">public_files</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span>project <span class="op">=</span> <span class="st">"admin/sbg-public-data"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load next 50 results</span></span>
<span><span class="va">public_files</span><span class="op">$</span><span class="fu">next_page</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load previous 50 results</span></span>
<span><span class="va">public_files</span><span class="op">$</span><span class="fu">prev_page</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load all results</span></span>
<span><span class="va">public_files</span><span class="op">$</span><span class="fu">all</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Lastly, printing <code>Collection</code> objects will print the first
10 items (if there are more than 10 items in the results) by default,
but this can be changed with the <code>n</code> parameter in its
<code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> function:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a collection of files</span></span>
<span><span class="va">public_files</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span>project <span class="op">=</span> <span class="st">"admin/sbg-public-data"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default print</span></span>
<span><span class="va">public_files</span></span>
<span></span>
<span><span class="co"># Print 20 items</span></span>
<span><span class="va">public_files</span><span class="op">$</span><span class="fu">print</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></code></pre></div>
<p><strong>Search by ID</strong></p>
<p>When searching by ID (usually it’s the resource’s <code><a href="https://rdrr.io/r/base/get.html" class="external-link">get()</a></code>
operation), your request will return your exact resource as it is
unique. Therefore, you do not have to set <code>offset</code> and
<code>limit</code> manually. It is good practice to find your resources
by their ID and pass this ID as an input to your task. You can find a
resource’s ID in the final part of the URL in the visual interface or
via API requests to list resources or get a resource’s details.</p>
<p><strong>Search by name</strong></p>
<p>Search by name as criteria in the <code>query()</code> operations of
Resources, returns all exact or partial matches depending on the
resource.</p>
<p>For example, to list all public files, use the
<code>admin/sbg-public-data</code> project query parameter, while if you
want to find an exact file by name, set its <code>name</code> parameter
to the exact value (partial search by name is not possible for
files).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Search all public files</span></span>
<span><span class="va">public_files</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span>project <span class="op">=</span> <span class="st">"admin/sbg-public-data"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Search files by name</span></span>
<span><span class="va">file_1000G_omni</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span></span>
<span>  project <span class="op">=</span> <span class="st">"admin/sbg-public-data"</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"1000G_omni2.5.b37.vcf"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>On the other hand, partial search by name works for Projects and Apps
resources. You can set the corresponding <code>name</code> or
<code>query_terms</code> parameters for this use case. In order to query
public apps, set the <code>visibility</code> parameter to ‘public’.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Search all public apps containing the STAR term</span></span>
<span><span class="va">public_star_apps</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">apps</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span></span>
<span>  visibility <span class="op">=</span> <span class="st">"public"</span>,</span>
<span>  query_terms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"STAR"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Search all projects that contain "demo" in the name</span></span>
<span><span class="va">demo_projs</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">projects</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"demo"</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
</div>
<div class="section level2">
<h2 id="quickstart">Quickstart<a class="anchor" aria-label="anchor" href="#quickstart"></a>
</h2>
<div class="section level3">
<h3 id="create-auth-object">Create <code>Auth</code> Object<a class="anchor" aria-label="anchor" href="#create-auth-object"></a>
</h3>
<p>Before you can access your account via the API, you have to provide
your credentials. You can obtain your credentials in the form of an <a href="https://docs.sevenbridges.com/v1.0/docs/get-your-authentication-token" class="external-link">“authentication
token”</a> from the <strong>Developer Tab</strong> under <strong>Account
Settings</strong> in the visual interface. Once you’ve obtained this,
create an <code>Auth</code> object, so it remembers your authentication
token and the path for the API. All subsequent requests will use these
two pieces of information.</p>
<p>Let’s load the package first:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://www.sevenbridges.com" class="external-link">"sevenbridges2"</a></span><span class="op">)</span></span></code></pre></div>
<p>You have three different ways to provide your token. Choose from one
of the methods below:</p>
<ol style="list-style-type: decimal">
<li><p><a href="#method1">Direct authentication.</a> Here you should
provide your developer token and a base URL for the platform of interest
(alternatively, you can provide the name of the platform - these are the
available options <code>cgc</code>, <code>aws-us</code>,
<code>aws-eu</code>, <code>ali-cn</code>, <code>cavatica</code>,
<code>f4c</code> - the default platform is <code>aws-us</code>) as
function call arguments to <code>Auth$new()</code>. This will create the
platform authentication object and temporarily set up your token and
platform base URL as environment variables <code>SB_AUTH_TOKEN</code>
and <code>SB_API_ENDPOINT</code>. This way, your token will not be
directly stored in the Auth object, but you will still be able to access
it by calling the <code>get_token()</code> method. Keep in mind that
these environment variables are session-specific and are deleted when
the session ends.</p></li>
<li><p><a href="#method2">Authentication via system environment
variables.</a> By default this will read the credential information from
two existing system environment variables: <code>SB_API_ENDPOINT</code>
and <code>SB_AUTH_TOKEN</code>. Of course, assuming that you have
previously set these environment variables. Alternatively, you can
specify the names of the system environment variables you want to be
loaded using the <code>sysenv_token</code> and <code>sysenv_url</code>
arguments.</p></li>
<li><p><a href="#method3">Authentication via the user configuration
file.</a> This file, by default
<code>$HOME/.sevenbridges/credentials</code>, provides an organized way
to collect and manage all your API authentication information for Seven
Bridges platforms.</p></li>
</ol>
<p>If you need to be logged into multiple accounts at the same time
(which can also be for different platforms), please use either the
second or the third method.</p>
<p><a name="method1"></a><strong>Method 1: Direct
authentication</strong></p>
<p>This is the most common method to construct the <code>Auth</code>
object. For example:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Authenticate with direct method</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Auth.html">Auth</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>platform <span class="op">=</span> <span class="st">"aws-us"</span>, token <span class="op">=</span> <span class="st">"&lt;your-token&gt;"</span><span class="op">)</span></span></code></pre></div>
<p><a name="method2"></a><strong>Method 2: Environment
variables</strong></p>
<p>To set the two environment variables in your system, you could use
the function <code>sbg_set_env()</code>. For example:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set environment variables</span></span>
<span><span class="fu">sevenbridges2</span><span class="fu">:::</span><span class="fu">sbg_set_env</span><span class="op">(</span></span>
<span>  url <span class="op">=</span> <span class="st">"https://api.sbgenomics.com/v2/"</span>,</span>
<span>  token <span class="op">=</span> <span class="st">"&lt;your_token&gt;"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Note that these environment variables are session-specific.</p>
<p>Create an <code>Auth</code> object:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Authenticate using environment variables</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Auth.html">Auth</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>from <span class="op">=</span> <span class="st">"env"</span><span class="op">)</span></span></code></pre></div>
<p><a name="method3"></a><strong>Method 3: User configuration
file</strong></p>
<p>Assume we have already created the configuration file named
<code>credentials</code> under the directory
<code>$HOME/.sevenbridges/</code>:</p>
<pre><code>[aws-us-&lt;username&gt;]
api_endpoint = https://api.sbgenomics.com/v2
auth_token = token_for_this_user

# another user on the same platform
[aws-us-rosalind-franklin]
api_endpoint = https://api.sbgenomics.com/v2
auth_token = token_for_this_user

[cgc]
api_endpoint = https://cgc-api.sbgenomics.com/v2
auth_token = token_for_this_user

[bdc]
api_endpoint = https://api.sb.biodatacatalyst.nhlbi.nih.gov/v2/
auth_token = token_for_this_user</code></pre>
<p>To load the user profile <code>aws-us-&lt;username&gt;</code> from
this configuration file, simply use:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load aws-us-&lt;username&gt; profile for authentication</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Auth.html">Auth</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  from <span class="op">=</span> <span class="st">"file"</span>,</span>
<span>  profile_name <span class="op">=</span> <span class="st">"aws-us-&lt;username&gt;"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>If <code>profile_name</code> is not specified, we will try to load
the profile named <code>[default]</code>:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load default profile</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Auth.html">Auth</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>from <span class="op">=</span> <span class="st">"file"</span><span class="op">)</span></span></code></pre></div>
<p>The option based on the use of a configuration file also enables
simultaneous authentication from multiple accounts. Assuming that we
have a configuration file like the one listed above, and that we want to
create authentication objects for two profiles (<code>default</code> and
<code>aws-us-&lt;username&gt;</code>), we can achieve this in the
following way:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create Auth object with 'default' account</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Auth.html">Auth</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>from <span class="op">=</span> <span class="st">"file"</span>, profile_name <span class="op">=</span> <span class="st">"default"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create Auth object with 'aws-us-&lt;username&gt;' account</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Auth.html">Auth</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>from <span class="op">=</span> <span class="st">"file"</span>, profile_name <span class="op">=</span> <span class="st">"aws-us-&lt;username&gt;"</span><span class="op">)</span></span></code></pre></div>
<p><strong><em>Note:</em></strong> API paths (base URLs) differ for each
Seven Bridges environment. Be sure to provide the correct path for the
environment you are using. API paths for some of the environments
are:</p>
<table style="width:99%;" class="table">
<colgroup>
<col width="38%">
<col width="46%">
<col width="14%">
</colgroup>
<thead><tr class="header">
<th>Platform Name</th>
<th>API Base URL</th>
<th>Short Name</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Seven Bridges Platform (US)</td>
<td><code>https://api.sbgenomics.com/v2</code></td>
<td><code>"aws-us"</code></td>
</tr>
<tr class="even">
<td>Seven Bridges Platform (EU)</td>
<td><code>https://eu-api.sbgenomics.com/v2</code></td>
<td><code>"aws-eu"</code></td>
</tr>
<tr class="odd">
<td>Seven Bridges Platform (China)</td>
<td><code>https://api.sevenbridges.cn/v2</code></td>
<td><code>"ali-cn"</code></td>
</tr>
<tr class="even">
<td>Cancer Genomics Cloud (CGC)</td>
<td><code>https://cgc-api.sbgenomics.com/v2</code></td>
<td><code>"cgc"</code></td>
</tr>
<tr class="odd">
<td>Cavatica</td>
<td><code>https://cavatica-api.sbgenomics.com/v2</code></td>
<td><code>"cavatica"</code></td>
</tr>
<tr class="even">
<td>BioData Catalyst Powered by Seven Bridges</td>
<td><code>https://api.sb.biodatacatalyst.nhlbi.nih.gov/v2</code></td>
<td><code>"f4c"</code></td>
</tr>
</tbody>
</table>
<div align="right">
<a href="#top">top</a>
</div>
<p>Please check
<code><a href="../articles/Authentication_and_Billing.html">vignette("Authentication_and_Billing", package = "sevenbridges2")</a></code>
for more technical details about all available authentication
methods.</p>
</div>
<div class="section level3">
<h3 id="get-user-information">Get User Information<a class="anchor" aria-label="anchor" href="#get-user-information"></a>
</h3>
<p><a name="youruser"></a><strong>Get your own information</strong></p>
<p>This call returns information about your account.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get currently authenticated user info</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="fu">user</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>── User ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
• country: United States
• affiliation: SBG
• last_name: Test
• first_name: User
• email: &lt;user&gt;@sbgenomics.com
• username: &lt;username&gt;
• href: https://api.sbgenomics.com/v2/users/&lt;user&gt;</code></pre>
<div align="right">
<a href="#top">top</a>
</div>
<p><strong>Get information about a user</strong></p>
<p>This call returns information about the specified user. Note that
currently you can view only your own user information, so this call is
equivalent to the <a href="#youruser">call to get information about your
account</a>.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get user info</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="fu">user</span><span class="op">(</span>username <span class="op">=</span> <span class="st">"&lt;username&gt;"</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
<p>Please check
<code><a href="../articles/Authentication_and_Billing.html">vignette("Authentication_and_Billing", package = "sevenbridges2")</a></code>
for more technical details about getting user information.</p>
</div>
<div class="section level3">
<h3 id="rate-limit">Rate Limit<a class="anchor" aria-label="anchor" href="#rate-limit"></a>
</h3>
<p>This call returns information about your current rate limit. This is
the number of API calls you can make in five minutes. This call also
returns information about your current instance limit.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get rate limit info</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="fu">rate_limit</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>── Rate Limit ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
• rate
  • limit: 1000
  • remaining: 1000
  • reset: 2022-12-26 11:31:01 CET
• instance
  • limit: 25
  • remaining: 25</code></pre>
<div align="right">
<a href="#top">top</a>
</div>
<p>Please check
<code><a href="../articles/Authentication_and_Billing.html">vignette("Authentication_and_Billing", package = "sevenbridges2")</a></code>
for more technical details about rate limit information.</p>
</div>
<div class="section level3">
<h3 id="show-billing-information">Show Billing Information<a class="anchor" aria-label="anchor" href="#show-billing-information"></a>
</h3>
<p>Each project must have a Billing Group associated with it. This
Billing Group pays for the storage and computation in the project.</p>
<p>For example, your first project(s) were created with the free funds
from the Pilot Funds Billing Group assigned to each user at sign-up.</p>
<p>To get information about your billing groups:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check your billing info</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">billing_groups</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This call lists all your billing groups, including groups that are
pending or have been disabled.</p>
<p>To get information about your invoices:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check your invoices</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">invoices</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The call returns information about all your available invoices,
unless you use the <code>billing_group_id</code> query parameter to
specify the ID of a particular billing group, in which case it will
return the invoice incurred by that billing group only.</p>
<p>To get detailed information for a specific billing group, please use
the billing_group method with the billing group ID. The information
returned includes the billing group owner, the total balance, and the
status of the billing group (pending, disabled,…).</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get a single billing group</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">billing_groups</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"&lt;billing_group_id&gt;"</span><span class="op">)</span></span></code></pre></div>
<pre><code>── Billing group info ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
• disabled: FALSE
• pending: FALSE
• type: regular
• name: My billing group
• owner: &lt;bg_owner's_username&gt;
• id: &lt;billing_group_id&gt;
• href: https://api.sbgenomics.com/v2/billing/groups/&lt;billing_group_id&gt;
• balance
  • currency: USD
  • amount: 221</code></pre>
<div align="right">
<a href="#top">top</a>
</div>
<p>Please check
<code><a href="../articles/Authentication_and_Billing.html">vignette("Authentication_and_Billing", package = "sevenbridges2")</a></code>
for more technical details about billing informations.</p>
</div>
<div class="section level3">
<h3 id="list-and-query-projects">List and query projects<a class="anchor" aria-label="anchor" href="#list-and-query-projects"></a>
</h3>
<p>Projects are the core building blocks of the platform. Each project
corresponds to a distinct scientific investigation, serving as a
container for its data, analysis tools, results, and collaborators.</p>
<p>In order to query and explore all projects, use the
<code>projects</code> resource path and the <code>query()</code> method.
One can also filter the projects by several criteria, like project’s
name and tags. The search by name is partial and case-insensitive.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List first 5 projects</span></span>
<span><span class="va">my_projects</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">projects</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span>limit <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">my_projects</span></span>
<span></span>
<span><span class="co"># Load next page of results</span></span>
<span><span class="va">my_projects</span><span class="op">$</span><span class="fu">next_page</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Return all projects that contain the term "demo"</span></span>
<span><span class="va">demo_projects</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">projects</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"demo"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Return all projects tagged with "demo"</span></span>
<span><span class="va">tagged_projects</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">projects</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span>tags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"demo"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Note that the output is the <code>Collection</code> object and the
results (list of <code>Project</code> objects) can be found within the
<code>items</code> field.</p>
<div align="right">
<a href="#top">top</a>
</div>
<p>Please check
<code><a href="../articles/Projects_and_Tasks_execution.html">vignette("Projects_and_Tasks_execution", package = "sevenbridges2")</a></code>
for more technical details about projects.</p>
</div>
<div class="section level3">
<h3 id="create-a-new-project">Create a new project<a class="anchor" aria-label="anchor" href="#create-a-new-project"></a>
</h3>
<p>Create a new project called “API testing” with the billing group
<code>id</code> obtained above.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List all available billing groups for currently logged in user</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">billing_groups</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set the billing group for the new project</span></span>
<span><span class="va">bid</span> <span class="op">&lt;-</span> <span class="st">"&lt;billing_group_id&gt;"</span></span>
<span></span>
<span><span class="co"># Create a new project</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">projects</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"API testing"</span>, billing_group <span class="op">=</span> <span class="va">bid</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"This project has been created using the sevenbridges2 R API</span></span>
<span><span class="st">  library."</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code>── Project ───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
• category: PRIVATE
• root_folder: &lt;root_folder_id&gt;
• type: v2
• description: This project has been created using the sevenbridges2 R API library.
• billing_group: &lt;billing_group_id&gt;
• name: API testing
• id: &lt;your_username_or_division&gt;/api-testing
• href: https://api.sbgenomics.com/v2/projects/&lt;your_username_or_division&gt;/api-testing
• settings
  • locked: FALSE
  • controlled: FALSE
  • location: aws:us-east-1
  • use_interruptible_instances: TRUE
  • use_memoization: FALSE
  • intermediate_files: list(duration = 24, retention = "LIMITED")
  • allow_network_access: TRUE
  • use_elastic_disk: FALSE</code></pre>
<div align="right">
<a href="#top">top</a>
</div>
<p>The <strong>new project</strong> is created on the platform. Notice
also that the variable <code>p</code> is an R6 object with fields that
contain information about the platform project. The facility also has
several methods that allow you to perform basic platform operations on
the project.</p>
<p>Please check
<code><a href="../articles/Projects_and_Tasks_execution.html">vignette("Projects_and_Tasks_execution", package = "sevenbridges2")</a></code>
for more technical details about projects.</p>
</div>
<div class="section level3">
<h3 id="get-details-of-a-specified-project">Get details of a specified project<a class="anchor" aria-label="anchor" href="#get-details-of-a-specified-project"></a>
</h3>
<p>Use the <code><a href="https://rdrr.io/r/base/get.html" class="external-link">get()</a></code> method and provide the full ID of the
project you would like to fetch.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get a single project by ID</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">projects</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"&lt;your_username_or_division&gt;/api-testing"</span><span class="op">)</span></span></code></pre></div>
<pre><code>── Project ───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
• category: PRIVATE
• root_folder: &lt;root_folder_id&gt;
• type: v2
• description: This project has been created using the sevenbridges2 R API library.
• billing_group: &lt;billing_group_id&gt;
• name: API testing
• id: &lt;your_username_or_division&gt;/api-testing
• href: https://api.sbgenomics.com/v2/projects/&lt;your_username_or_division&gt;/api-testing
• settings
  • locked: FALSE
  • controlled: FALSE
  • location: aws:us-east-1
  • use_interruptible_instances: TRUE
  • use_memoization: FALSE
  • intermediate_files: list(duration = 24, retention = "LIMITED")
  • allow_network_access: TRUE
  • use_elastic_disk: FALSE</code></pre>
<p>Please check
<code><a href="../articles/Projects_and_Tasks_execution.html">vignette("Projects_and_Tasks_execution", package = "sevenbridges2")</a></code>
for more technical details about apps.</p>
</div>
<div class="section level3">
<h3 id="copy-app-into-the-project">Copy app into the project<a class="anchor" aria-label="anchor" href="#copy-app-into-the-project"></a>
</h3>
<p>Seven Bridges maintains workflows and tools available to all of its
users in the Public Apps repository.</p>
<p>To find out more about public apps, you can do the following:</p>
<ul>
<li>Browse them online. Check out the <a href="https://docs.sevenbridges.com/docs/search-for-an-app" class="external-link">tutorial</a>
in the “Find apps” section.</li>
<li>You can use the <code>sevenbridges2</code> package to find it, as
shown below.</li>
</ul>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Search by name matching, with limit 10</span></span>
<span><span class="va">public_apps</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">apps</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span></span>
<span>  visibility <span class="op">=</span> <span class="st">"public"</span>,</span>
<span>  limit <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  query_terms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"STAR"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Search by ID</span></span>
<span><span class="va">star_app</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">apps</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="st">"admin/sbg-public-data/rna-seq-alignment-star/0"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Now, copy the App your <code>project</code> with a new
<code>name</code>, following this logic.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Copy app into the project</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">apps</span><span class="op">$</span><span class="fu">copy</span><span class="op">(</span></span>
<span>  app <span class="op">=</span> <span class="va">star_app</span>,</span>
<span>  project <span class="op">=</span> <span class="st">"&lt;username_or_division&gt;/api-testing"</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"New copy of STAR"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check if it is copied</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">projects</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"&lt;username_or_division&gt;/api-testing"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># List the apps you have in your project</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="fu">list_apps</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The short name is changed to <code>newcopyofstar</code>.</p>
<pre><code>== App ==
id : &lt;username_or_division&gt;/api-testing/newcopyofstar/0
name : RNA-seq Alignment - STAR
project : &lt;username_or_division&gt;/api-testing
revision : 0</code></pre>
<p>Alternatively, you can copy it from the <code>App</code> object.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get public app RNA Sequencing alignment - STAR</span></span>
<span><span class="va">star_app</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">apps</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="st">"admin/sbg-public-data/rna-seq-alignment-star/0"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Copy it into a project</span></span>
<span><span class="va">star_app</span><span class="op">$</span><span class="fu">copy</span><span class="op">(</span></span>
<span>  project <span class="op">=</span> <span class="st">"&lt;username_or_division&gt;/api-testing"</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"Copy of STAR"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
<p>Next, we would like to run a task with this app. Let’s see what is
required.</p>
<p>Please check
<code><a href="../articles/Projects_and_Tasks_execution.html">vignette("Projects_and_Tasks_execution", package = "sevenbridges2")</a></code>
for more technical details about tasks.</p>
</div>
<div class="section level3">
<h3 id="execute-a-new-task">Execute a new task<a class="anchor" aria-label="anchor" href="#execute-a-new-task"></a>
</h3>
<div class="section level4">
<h4 id="find-your-app-inputs">Find your app inputs<a class="anchor" aria-label="anchor" href="#find-your-app-inputs"></a>
</h4>
<p>Once you have copied the public app
<code>admin/sbg-public-data/rna-seq-alignment-star/0</code> into your
project, <code>&lt;username&gt;/api-testing</code>, the app
<code>id</code> in your current project is
<code>&lt;username&gt;/api-testing/newcopyofstar</code>. Alternatively,
you can use another app you already have in your project for this
Quickstart.</p>
<p>To draft a new task, you need to specify the following:</p>
<ul>
<li>The name of the task</li>
<li>An optional description</li>
<li>The App object or <code>id</code> of the workflow you are
executing</li>
<li>The inputs for your workflow.</li>
</ul>
<p>You can always check the App details on the visual interface for task
input requirements. However, there is also a function on the App objects
to get basic information about app’s inputs and outputs. To find the
required inputs with R, you need to get an <code>App</code> object
first.</p>
<p>Let’s check which inputs this app requires by calling the
<code>input_matrix()</code> function and bring them into our
project.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fetch copied app</span></span>
<span><span class="va">copied_star_app</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">apps</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="st">"&lt;username_or_division&gt;/api-testing/newcopyofstar/0"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Preview its inputs</span></span>
<span><span class="va">copied_star_app</span><span class="op">$</span><span class="fu">input_matrix</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Locate the IDs of the required inputs. Note that task inputs need to
match the expected data type and name. In the above example, we see two
required fields:</p>
<ul>
<li>
<strong>fastq:</strong> This input takes a file array in the
following formats: FASTA, FASTQ, FA, FQ etc.</li>
<li>
<strong>genomeFastaFiles:</strong> This is a single reference file
in the FASTA, FA, FNA or TAR format.</li>
</ul>
<p>We also want to provide a gene feature file:</p>
<ul>
<li>
<strong>sjdbGTFfile:</strong> A file array that can be in the GTF,
GFF, GFF2, or GFF3 format.</li>
</ul>
<p>You can find a list of possible input types below:</p>
<ul>
<li>
<strong>number, character or integer:</strong> you can directly pass
these to the input parameter as they are.</li>
<li>
<strong>enum type:</strong> Pass this value to the input
parameter.</li>
<li>
<strong>file:</strong> This input is a file. However, while some
inputs accept only a single file (<code>File</code>), other inputs take
more than one file (<code>File</code> arrays, <code>FilesList</code>, or
‘<code>File...</code>’ ). This input requires you to pass a single
<code>File</code> object (for a single file input) or list of
<code>File</code> objects (for inputs which accept more than one file).
You can search for your file by <code>id</code> or by <code>name</code>,
as shown in the example below.</li>
</ul>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="prepare-your-input-files">Prepare your input files<a class="anchor" aria-label="anchor" href="#prepare-your-input-files"></a>
</h4>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get reads (fastq) files and and copy them into a project</span></span>
<span><span class="va">reads_1</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"641c48c425ed1842bd0bf799"</span><span class="op">)</span> <span class="co"># file id</span></span>
<span><span class="va">reads_1</span><span class="op">$</span><span class="fu">copy_to</span><span class="op">(</span>project <span class="op">=</span> <span class="va">p</span><span class="op">)</span></span>
<span></span>
<span><span class="va">reads_2</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"641c48c425ed1842bd0bf835"</span><span class="op">)</span> <span class="co"># file id</span></span>
<span><span class="va">reads_2</span><span class="op">$</span><span class="fu">copy_to</span><span class="op">(</span>project <span class="op">=</span> <span class="va">p</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get a single file reference file and copy into a project</span></span>
<span><span class="va">fasta_in</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"641c48c525ed1842bd0bf86a"</span><span class="op">)</span> <span class="co"># file id</span></span>
<span><span class="va">fasta_in</span><span class="op">$</span><span class="fu">copy_to</span><span class="op">(</span>project <span class="op">=</span> <span class="va">p</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get gtf file and copy into a project</span></span>
<span><span class="va">gtf_in</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"641c48c425ed1842bd0bf825"</span><span class="op">)</span> <span class="co"># file id</span></span>
<span><span class="va">gtf_in</span><span class="op">$</span><span class="fu">copy_to</span><span class="op">(</span>project <span class="op">=</span> <span class="va">p</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get copied files</span></span>
<span><span class="va">input_files</span> <span class="op">&lt;-</span> <span class="va">p</span><span class="op">$</span><span class="fu">list_files</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">items</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="create-a-new-draft-task">Create a new draft task<a class="anchor" aria-label="anchor" href="#create-a-new-draft-task"></a>
</h4>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add new tasks</span></span>
<span><span class="va">taskName</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"STAR-alignment "</span>, <span class="fu"><a href="https://rdrr.io/r/base/date.html" class="external-link">date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tsk</span> <span class="op">&lt;-</span> <span class="va">p</span><span class="op">$</span><span class="fu">create_task</span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="va">taskName</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"STAR test"</span>,</span>
<span>  app <span class="op">=</span> <span class="va">copied_star_app</span>,</span>
<span>  inputs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"fastq"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">input_files</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="va">input_files</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>    <span class="st">"genomeFastaFiles"</span> <span class="op">=</span> <span class="va">input_files</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span>,</span>
<span>    <span class="st">"sjdbGTFfile"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">input_files</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Preview task</span></span>
<span><span class="va">tsk</span><span class="op">$</span><span class="fu">print</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="preview-your-apps-expected-outputs">Preview your app’s expected outputs<a class="anchor" aria-label="anchor" href="#preview-your-apps-expected-outputs"></a>
</h4>
<p>Similarly as with inputs, you can also preview the structure of the
expected outputs of the task or workflow. You can get details about the
output’s name, description and type using <code>output_matrix()</code>.
This function can be called from the App object.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get app's outputs details</span></span>
<span><span class="va">copied_star_app</span><span class="op">$</span><span class="fu">output_matrix</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
<p>Please check
<code><a href="../articles/Projects_and_Tasks_execution.html">vignette("Projects_and_Tasks_execution", package = "sevenbridges2")</a></code>
for more technical details about tasks.</p>
</div>
</div>
<div class="section level3">
<h3 id="run-a-task">Run a Task<a class="anchor" aria-label="anchor" href="#run-a-task"></a>
</h3>
<p>Now, we are ready to run our task.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Run your task</span></span>
<span><span class="va">tsk</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Before you run your task, you can adjust your draft task if you have
any final modifications.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Update task</span></span>
<span><span class="va">tsk</span><span class="op">$</span><span class="fu">update</span><span class="op">(</span>description <span class="op">=</span> <span class="st">"New RNA SEQ Alignment - STAR task"</span><span class="op">)</span></span></code></pre></div>
<p>After you run a task, you can track its status by refreshing the
object with <code>reload()</code> function.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Reload task</span></span>
<span><span class="va">tsk</span><span class="op">$</span><span class="fu">reload</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">tsk</span><span class="op">$</span><span class="va">status</span></span></code></pre></div>
<p>You can also abort the task execution if needed:</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Abort your task</span></span>
<span><span class="va">tsk</span><span class="op">$</span><span class="fu">abort</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>If you want to rerun your task without any modifications, you can use
<code>rerun()</code> function which will clone the current task for you
and start the execution immediately.</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Rerun your task</span></span>
<span><span class="va">tsk</span><span class="op">$</span><span class="fu">rerun</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>On the other side, if you want to update your task first and then
re-run it, you should clone the current task, update it and then run it,
as demonstrated below:</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># First clone existing task</span></span>
<span><span class="va">cloned_task</span> <span class="op">&lt;-</span> <span class="va">tsk</span><span class="op">$</span><span class="fu">clone_task</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Then, update GTF input file in the cloned task</span></span>
<span><span class="va">cloned_task</span><span class="op">$</span><span class="fu">update</span><span class="op">(</span>inputs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sjdbGTFfile <span class="op">=</span> <span class="st">"&lt;some new file&gt;"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">cloned_task</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Alternatively, you can delete the draft task if you no longer wish to
run it.</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># # not run</span></span>
<span><span class="co"># tsk$delete()</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
<p>Please check
<code><a href="../articles/Projects_and_Tasks_execution.html">vignette("Projects_and_Tasks_execution", package = "sevenbridges2")</a></code>
for more technical details about running tasks.</p>
</div>
<div class="section level3">
<h3 id="run-tasks-using-spot-instances">Run tasks using spot instances<a class="anchor" aria-label="anchor" href="#run-tasks-using-spot-instances"></a>
</h3>
<p>Running tasks with <a href="https://docs.sevenbridges.com/docs/about-spot-instances" class="external-link">spot
instances</a> could potentially <a href="https://www.sevenbridges.com/spot-instances-cost-reduction/" class="external-link">reduce
a considerable amount of computational cost</a>. This option can be
controlled on the project level or the task level on Seven Bridges
platforms. Our package follows the same <a href="https://docs.sevenbridges.com/docs/use-spot-instances" class="external-link">logic</a>
as our platform’s web interface (the current default setting for spot
instances is <strong>on</strong>).</p>
<p>For example, when we create a project using Projects resource’s
method <code>create()</code>, we can set
<code>use_interruptible = FALSE</code> to use on-demand instances
(non-interruptible but more expensive) instead of the spot instances
(interruptible but cheaper):</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create project with disabled spot instances</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">projects</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"spot-disabled-project"</span>, <span class="va">bid</span>, description <span class="op">=</span> <span class="st">"spot disabled project"</span>,</span>
<span>  use_interruptible <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Then all the new tasks created under this project will use on-demand
instances to run <strong>by default</strong>, unless an argument
<code>use_interruptible_instances</code> is specifically set to
<code>TRUE</code> when drafting the new task using Tasks resource method
<code>create()</code>.</p>
<p>For example, if <code>p</code> is the above spot disabled project, to
draft a task that will use spot instances to run:</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create task and set usage of interruptible instances to TRUE</span></span>
<span><span class="va">tsk</span> <span class="op">&lt;-</span> <span class="va">p</span><span class="op">$</span><span class="fu">create_task</span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"spot enabled task in a spot disabled project"</span><span class="op">)</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"spot enabled task"</span>,</span>
<span>  app <span class="op">=</span> <span class="va">copied_star_app</span>,</span>
<span>  inputs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"fastq"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">input_files</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="va">input_files</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>    <span class="st">"genomeFastaFiles"</span> <span class="op">=</span> <span class="va">input_files</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span>,</span>
<span>    <span class="st">"sjdbGTFfile"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">input_files</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  use_interruptible_instances <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Conversely, you can have a spot instance enabled project, but draft
and run specific tasks using on-demand instances, by setting
<code>use_interruptible_instances = FALSE</code> in
<code>create_task()</code> explicitly.</p>
<div align="right">
<a href="#top">top</a>
</div>
<p>Please check
<code><a href="../articles/Projects_and_Tasks_execution.html">vignette("Projects_and_Tasks_execution", package = "sevenbridges2")</a></code>
for more technical details about running tasks using spot instances.</p>
</div>
<div class="section level3">
<h3 id="execution-hints-per-task-run">Execution hints per task run<a class="anchor" aria-label="anchor" href="#execution-hints-per-task-run"></a>
</h3>
<p>During workflow development and benchmarking, sometimes we need to
view and make adjustments to the computational resources needed for a
task to run more efficiently. Also, if a task fails due to resource
deficiency, we often want to define a larger instance for the task
re-run without editing the app itself. This is particularly important in
cases where there is not enough disk space.</p>
<p>The Seven Bridges API allows setting specific task execution
parameters by using <code>execution_settings</code>. It includes the
instance type (<code>instance_type</code>) and the maximum number of
parallel instances (<code>max_parallel_instances</code>):</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create task with setting instance type and number of parallel instances</span></span>
<span><span class="va">tsk</span> <span class="op">&lt;-</span> <span class="va">p</span><span class="op">$</span><span class="fu">create_task</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  execution_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    instance_type <span class="op">=</span> <span class="st">"c4.2xlarge;ebs-gp2;2000"</span>,</span>
<span>    max_parallel_instances <span class="op">=</span> <span class="fl">2</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>For details about <code>execution_settings</code>, please check <a href="https://docs.sevenbridges.com/reference/create-a-new-task" class="external-link">create
a new draft task</a>.</p>
<div align="right">
<a href="#top">top</a>
</div>
<p>Please check
<code><a href="../articles/Projects_and_Tasks_execution.html">vignette("Projects_and_Tasks_execution", package = "sevenbridges2")</a></code>
for more technical details about execution hints.</p>
</div>
<div class="section level3">
<h3 id="draft-a-batch-task">Draft a batch task<a class="anchor" aria-label="anchor" href="#draft-a-batch-task"></a>
</h3>
<p>Now let’s do a batch with 4 files in 2 groups, which is batched by
metadata <code>sample_id</code>. We will assume each file has this
metadata field entered. Since these files can be evenly grouped into 2,
we will have a single parent batch task with 2 child tasks.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add two more fastq files that will be used in our task inputs</span></span>
<span><span class="co"># and copy them into our API testing project</span></span>
<span><span class="va">reads_3</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"641c48c425ed1842bd0bf7b6"</span><span class="op">)</span> <span class="co"># file id</span></span>
<span><span class="va">reads_3</span><span class="op">$</span><span class="fu">copy_to</span><span class="op">(</span>project <span class="op">=</span> <span class="va">p</span><span class="op">)</span></span>
<span></span>
<span><span class="va">reads_4</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"641c48c425ed1842bd0bf7a5"</span><span class="op">)</span> <span class="co"># file id</span></span>
<span><span class="va">reads_4</span><span class="op">$</span><span class="fu">copy_to</span><span class="op">(</span>project <span class="op">=</span> <span class="va">p</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get all project files</span></span>
<span><span class="va">input_files</span> <span class="op">&lt;-</span> <span class="va">p</span><span class="op">$</span><span class="fu">list_files</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">items</span></span>
<span></span>
<span><span class="va">taskName</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"STAR-alignment "</span>, <span class="fu"><a href="https://rdrr.io/r/base/date.html" class="external-link">date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create task with batch criteria</span></span>
<span><span class="va">tsk</span> <span class="op">&lt;-</span> <span class="va">p</span><span class="op">$</span><span class="fu">create_task</span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="va">taskName</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Batch Star Test"</span>,</span>
<span>  app <span class="op">=</span> <span class="va">copied_star_app</span>,</span>
<span>  batch <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  batch_input <span class="op">=</span> <span class="st">"fastq"</span>,</span>
<span>  batch_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    type <span class="op">=</span> <span class="st">"CRITERIA"</span>,</span>
<span>    criteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"metadata.sample_id"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  inputs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"fastq"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="va">input_files</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>      <span class="va">input_files</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>,</span>
<span>      <span class="va">input_files</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span>,</span>
<span>      <span class="va">input_files</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="st">"genomeFastaFiles"</span> <span class="op">=</span> <span class="va">input_files</span><span class="op">[[</span><span class="fl">5</span><span class="op">]</span><span class="op">]</span>,</span>
<span>    <span class="st">"sjdbGTFfile"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">input_files</span><span class="op">[[</span><span class="fl">6</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run batch task</span></span>
<span><span class="va">tsk</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Now you have a draft batch task. Please check it out in the visual
interface. Your response body should inform you of any errors or
warnings.</p>
<p>You can also check the parent task’s children status with
<code>list_batch_children()</code> method and then for each child
execution details:</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List parent task children and their execution details</span></span>
<span><span class="va">child_tasks</span> <span class="op">&lt;-</span> <span class="va">tsk</span><span class="op">$</span><span class="fu">list_batch_children</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">child1_details</span> <span class="op">&lt;-</span> <span class="va">child_tasks</span><span class="op">$</span><span class="va">items</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="fu">get_execution_details</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">child2_details</span> <span class="op">&lt;-</span> <span class="va">child_tasks</span><span class="op">$</span><span class="va">items</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="fu">get_execution_details</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
<p>Please check
<code><a href="../articles/Projects_and_Tasks_execution.html">vignette("Projects_and_Tasks_execution", package = "sevenbridges2")</a></code>
for more technical details about running batch tasks.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Marko Trifunovic, Vladimir Obucina, Marija Jovanovic, Seven Bridges Genomics Inc..</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
