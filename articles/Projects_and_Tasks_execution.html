<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="sevenbridges2">
<title>Projects, Files, Apps and Tasks execution with Seven Bridges API R Client • sevenbridges2</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Projects, Files, Apps and Tasks execution with Seven Bridges API R Client">
<meta property="og:description" content="sevenbridges2">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">sevenbridges2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Authentication_and_Billing.html">Authentication and Billing reference guide for Seven Bridges API R Client</a>
    <a class="dropdown-item" href="../articles/Files_upload_and_Volumes.html">File upload and Volumes reference guide for Seven Bridges API R Client</a>
    <a class="dropdown-item" href="../articles/Projects_and_Tasks_execution.html">Projects, Files, Apps and Tasks execution with Seven Bridges API R Client</a>
    <a class="dropdown-item" href="../articles/quickstart.html">Introduction and Quickstart for Seven Bridges API R Client</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/sbg/sevenbridges2/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Projects, Files, Apps and Tasks execution with Seven Bridges API R Client</h1>
            
            <h4 data-toc-skip class="date">2023-12-19</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/sbg/sevenbridges2/blob/HEAD/vignettes/Projects_and_Tasks_execution.Rmd" class="external-link"><code>vignettes/Projects_and_Tasks_execution.Rmd</code></a></small>
      <div class="d-none name"><code>Projects_and_Tasks_execution.Rmd</code></div>
    </div>

    
    
<p><a name="top"></a></p>
<div class="section level2">
<h2 id="projects">Projects<a class="anchor" aria-label="anchor" href="#projects"></a>
</h2>
<p>Projects are the core building blocks of the platform. Each project
corresponds to a distinct scientific investigation, serving as a
container for its data, analysis tools, results, and collaborators.</p>
<p>All projects related operations can be accessed through the
<code>projects</code> path from the <code>Auth</code> object.
<code>Projects</code> is also a <code>Resource</code> R6 class which
contains implementation of <code>query()</code>, <code><a href="https://rdrr.io/r/base/get.html" class="external-link">get()</a></code> and
<code>delete()</code> methods for listing, fetching a single project and
deleting a specific project. Besides those, there is also a custom
method to create projects.</p>
<p>When you fetch a single project, it is represented as an object of
the <code>Project</code> class containing all project information and
additional methods that can be executed directly on the project such as:
updating the project, project members management, listing project files,
apps and tasks etc.</p>
<div class="section level3">
<h3 id="list-all-projects">List all projects<a class="anchor" aria-label="anchor" href="#list-all-projects"></a>
</h3>
<p>The following call returns a Collection with a list of all projects
you are a member of. Each project’s <code>project_id</code> and name
will be printed. For full project information, you can access the
<code>items</code> field in the <code>Collection</code> object and
preview the list of projects.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List and view your projects</span></span>
<span><span class="va">all_my_projects</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">projects</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">all_my_projects</span><span class="op">$</span><span class="va">items</span><span class="op">)</span></span></code></pre></div>
<p>If you want to list the projects owned by and accessible to a
particular user, specify the <code>owner</code> argument as follows.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List projects of particular user</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">projects</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span>owner <span class="op">=</span> <span class="st">"&lt;username1&gt;"</span><span class="op">)</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">projects</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span>owner <span class="op">=</span> <span class="st">"&lt;username2&gt;"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="partial-match-project-name">Partial match project name<a class="anchor" aria-label="anchor" href="#partial-match-project-name"></a>
</h3>
<p>For a more friendly interface and convenient search, the
<code>sevenbridges2</code> package supports <em>partial name
matching</em>. Set the <code>name</code> parameter in the
<code>query()</code> method:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List projects whose name contains 'demo'</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">projects</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"demo"</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level3">
<h3 id="filter-by-project-creation-date-modification-date-and-creator">Filter by project creation date, modification date, and creator<a class="anchor" aria-label="anchor" href="#filter-by-project-creation-date-modification-date-and-creator"></a>
</h3>
<p>Project creation date, modification date, and creator information is
useful for quickly locating the project you need, especially when you
want to follow the life cycle of a large number of projects and
distinguish recent projects from old ones. To facilitate such needs, the
fields <code>created_by</code>, <code>created_on</code>, and
<code>modified_on</code> are returned in the project query calls. Since
these fields cannot be passed to the <code>query()</code> function as
parameters, you can use the helper code below in order to perform such
action:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Return all projects matching the name "wgs"</span></span>
<span><span class="va">wgs_projects</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">projects</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"wgs"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filter by project creators</span></span>
<span><span class="va">creators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">wgs_projects</span><span class="op">$</span><span class="va">items</span>, <span class="st">"[["</span>, <span class="st">"created_by"</span><span class="op">)</span></span>
<span><span class="va">wgs_projects</span><span class="op">$</span><span class="va">items</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">creators</span> <span class="op">==</span> <span class="st">"&lt;some_username&gt;"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Filter by project creation date</span></span>
<span><span class="va">create_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">wgs_projects</span><span class="op">$</span><span class="va">items</span>, <span class="st">"[["</span>, <span class="st">"created_on"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">wgs_projects</span><span class="op">$</span><span class="va">items</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">create_date</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2019-01-01"</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Filter by project modification date</span></span>
<span><span class="va">modify_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">wgs_projects</span><span class="op">$</span><span class="va">items</span>, <span class="st">"[["</span>, <span class="st">"modified_on"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">wgs_projects</span><span class="op">$</span><span class="va">items</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">modify_date</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2019-01-01"</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level3">
<h3 id="create-a-new-project">Create a new project<a class="anchor" aria-label="anchor" href="#create-a-new-project"></a>
</h3>
<p>To create a new project, use the <code>create()</code> method on the
Projects path. Users need to specify the following:</p>
<ul>
<li>
<code>name</code> (required)</li>
<li>
<code>billing_group</code> (required)</li>
</ul>
<p>Other parameters and settings are optional. You can find more
information in the <code>create()</code> function documentation on
<code><a href="../reference/Projects.html">?Projects</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get billing group</span></span>
<span><span class="va">billing_groups</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">billing_groups</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">billing_group</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">billing_groups</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"&lt;billing_id&gt;"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a project named 'API Testing'</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">projects</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"API Testing"</span>, billing_group <span class="op">=</span> <span class="va">billing_group</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Test for API"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level3">
<h3 id="get-a-single-project">Get a single project<a class="anchor" aria-label="anchor" href="#get-a-single-project"></a>
</h3>
<p>Let’s fetch the project we’ve just created by its ID. For this
purpose, we can use Projects’ <code><a href="https://rdrr.io/r/base/get.html" class="external-link">get()</a></code> method. This method
accepts only project ID which consists of:</p>
<ul>
<li>user’s username or division name (for Seven Bridges platform users
that are part of some divisions) and</li>
<li>project’s short name in lowercase with spaces replaced by
dashes,</li>
</ul>
<p>in the form of
<code>&lt;your_username_or_division&gt;/&lt;project's-short-name&gt;</code>.
This id can also be seen in the URL of the project on the UI.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fetch previously created project</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">projects</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"&lt;your_username_or_division&gt;/api-testing"</span><span class="op">)</span></span></code></pre></div>
<p>To print all details about the project, use
<code>detailed_print()</code> method directly on the
<code>Project</code> object:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Print all project info</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="fu">detailed_print</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level3">
<h3 id="delete-a-project">Delete a project<a class="anchor" aria-label="anchor" href="#delete-a-project"></a>
</h3>
<p>There are two ways to delete a project. One is from the
<code>projects</code> path on the authentication object and the other
one is to call the <code>delete()</code> method directly on the
<code>Project</code> object you want to delete:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Delete project using Auth$projects path</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">projects</span><span class="op">$</span><span class="fu">delete</span><span class="op">(</span>project <span class="op">=</span> <span class="st">"&lt;project_object_or_id&gt;"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Delete project directly from the project object</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="fu">delete</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Please be careful when using this method and note that calling it
will permanently delete the project from the platform.</p>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level3">
<h3 id="edit-an-existing-project">Edit an existing project<a class="anchor" aria-label="anchor" href="#edit-an-existing-project"></a>
</h3>
<p>If you want to edit an existing project, you can do so by using the
<code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code> method on the Project object. As a project Admin
you can use it to change the name, description, settings, tags or
billing group of the project. For example, if you want to change the
name and description of the project, you can do it in the following
way:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Update project</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="fu">update</span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"Project with modified name"</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"This is the modified description."</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Keep in mind that this modifies only the name of the project, not its
short name. Therefore, after calling this method, the ID of the project
will remain the same.</p>
<p>If something changes in the project in the Platform UI, you can
refresh your Project object to fetch the changes, by reloading it
with:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Reload project object</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="fu">reload</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level3">
<h3 id="project-members-management">Project members management<a class="anchor" aria-label="anchor" href="#project-members-management"></a>
</h3>
<div class="section level4">
<h4 id="list-project-members">List project members<a class="anchor" aria-label="anchor" href="#list-project-members"></a>
</h4>
<p>This call returns a <code>Collection</code> with a list of members of
the specified project. For each member, the response is wrapped into a
Member class object containing:</p>
<ul>
<li>The member’s username, email, id, and type and</li>
<li>The member’s permissions in the specified project.</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List project members</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="fu">list_members</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="add-a-member-to-a-project">Add a member to a project<a class="anchor" aria-label="anchor" href="#add-a-member-to-a-project"></a>
</h4>
<p>This call adds a new user to the specified project. It can only be
made by a user who has admin permissions in the project.</p>
<p>Requests to add a project member must include the key
<code>permissions</code>. However, if you do not include a value, the
member’s permissions will be set to default values, which is read-only
(only the <code>read</code> value will be set to TRUE).</p>
<p>Set permissions by creating a named list with <code>copy</code>,
<code>write</code>, <code>execute</code>, <code>admin</code>, or
<code>read</code> names and assign TRUE or FALSE values to them.</p>
<p>Note: <code>read</code> is implicit and set by default. You can not
be a project member without having <code>read</code> permissions.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add project member</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="fu">add_member</span><span class="op">(</span></span>
<span>  user <span class="op">=</span> <span class="st">"&lt;username_of_a_user_you_want_to_add&gt;"</span>,</span>
<span>  permissions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>write <span class="op">=</span> <span class="cn">TRUE</span>, execute <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code>── Member ─────────────────────────────────────────────────────────────────────
• type: USER
• email: new_user@velsera.com
• username: &lt;username_of_a_user_you_want_to_add&gt;
• id: &lt;username_of_a_user_you_want_to_add&gt;
• href: https://api.sbgenomics.com/v2/projects/&lt;admin_username&gt;/api-testing/members/&lt;username_of_a_user_you_want_to_add&gt;
• permissions:
  • write: TRUE
  • read: TRUE
  • copy: FALSE
  • execute: TRUE
  • admin: FALSE
  </code></pre>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="get-and-modify-a-project-members-permissions">Get and modify a project member’s permissions<a class="anchor" aria-label="anchor" href="#get-and-modify-a-project-members-permissions"></a>
</h4>
<p>Sometimes you may just want to investigate a member’s permissions
within a specified project or update them, and you can do that by
calling the <code>modify_member_permissions()</code> method. For this
method to work, the user calling it must have admin permissions in the
project. For example, you may want to give <code>write</code>
permissions to a project member:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Modify project member's permissions</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="fu">modify_member_permissions</span><span class="op">(</span></span>
<span>  user <span class="op">=</span> <span class="st">"&lt;username_of_a_user_of_interest&gt;"</span>,</span>
<span>  permissions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>copy <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="remove-a-project-member">Remove a project member<a class="anchor" aria-label="anchor" href="#remove-a-project-member"></a>
</h4>
<p>On the other hand, you can delete a member from the project in a
similar way with the <code>remove_member()</code> operation:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Remove a project member</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="fu">remove_member</span><span class="op">(</span>user <span class="op">=</span> <span class="st">"&lt;username_of_a_user_you_want_to_remove&gt;"</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
</div>
<div class="section level3">
<h3 id="list-project-files">List project files<a class="anchor" aria-label="anchor" href="#list-project-files"></a>
</h3>
<p>In order to list all files and folders (special type of files) within
the specified project object, you can use the Project’s
<code>list_files()</code> method.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List project files</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="fu">list_files</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>It will return a <code>Collection</code> object with the
<code>items</code> field containing a list of returned <code>File</code>
objects, along with pagination options.</p>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level3">
<h3 id="create-a-folder-within-project-files">Create a folder within project Files<a class="anchor" aria-label="anchor" href="#create-a-folder-within-project-files"></a>
</h3>
<p>You are also able to create a folder within a project’s root Files
directory using the <code>create_folder()</code> method. You have to
specify the folder name which should not start with ’__’ or contain
spaces.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a folder within project files</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="fu">create_folder</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"My_new_folder"</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level3">
<h3 id="get-a-projects-root-folder-object">Get a project’s root folder object<a class="anchor" aria-label="anchor" href="#get-a-projects-root-folder-object"></a>
</h3>
<p>Lastly, the project’s root directory with all your files is a folder
itself, therefore you are able to get this folder as a File object too
using <code>get_root_folder()</code>.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get a project's root folder object</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="fu">get_root_folder</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level3">
<h3 id="list-projects-apps-tasks-and-import-jobs">List project’s apps, tasks and import jobs<a class="anchor" aria-label="anchor" href="#list-projects-apps-tasks-and-import-jobs"></a>
</h3>
<p>We will just briefly mention that you can also list all project’s
apps, tasks and import jobs (created for Volume imports) directly on the
Project object, but more details about these topics will be explained in
the upcoming chapters:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List project's apps</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="fu">list_apps</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># List project's tasks</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="fu">list_tasks</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># List project's imports</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="fu">list_imports</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level3">
<h3 id="create-a-new-app-and-task-within-a-project">Create a new app and task within a project<a class="anchor" aria-label="anchor" href="#create-a-new-app-and-task-within-a-project"></a>
</h3>
<p>Another shortcut is available on the Project object and that is
creation of apps and tasks. More details about this topic will be
provided in the next chapters.</p>
</div>
</div>
<div class="section level2">
<h2 id="files-folders-and-metadata">Files, folders and metadata<a class="anchor" aria-label="anchor" href="#files-folders-and-metadata"></a>
</h2>
<p>All file-related operations can be accessed through the
<code>files</code> path from the <code>Auth</code> object.
<code>Files</code> also inherits <code>Resource</code> R6 class which
contains an implementation of <code>query()</code>, <code><a href="https://rdrr.io/r/base/get.html" class="external-link">get()</a></code>
and <code>delete()</code> methods for listing, fetching a single
file/folder, and deleting a specific file/folder. Besides those, there
are also custom methods to copy files/folders and create folders.</p>
<p>When you fetch single file/folder, it is represented as an object of
<code>File</code> class. Note that class of both <code>files</code> and
<code>subdirectories</code> is <code>File</code>. The difference between
them is in the <code>type</code> parameter which is:</p>
<ul>
<li>
<code>File</code> for <code>files</code>
</li>
<li>
<code>Folder</code> for <code>subdirectories</code>.</li>
</ul>
<p><code>File</code> object contains all file/folder information and
additional methods that can be executed directly on the object like
updating, adding tags, setting metadata, copying or moving files,
exporting to volumes etc.</p>
<div class="section level3">
<h3 id="list-files">List files<a class="anchor" aria-label="anchor" href="#list-files"></a>
</h3>
<p>This call lists <code>files</code> and <code>subdirectories</code> in
a specified <strong>project</strong> or <strong>directory</strong>
within a project, with specified properties that you can access. The
project or directory whose contents you want to list is specified as a
parameter in the call.</p>
<p>The result will be a <code>Collection</code> class containing a list
of File objects in the <code>items</code> field.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List files in the project root directory</span></span>
<span><span class="va">api_testing_files</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span>project <span class="op">=</span> <span class="st">"project_object_or_id"</span><span class="op">)</span></span>
<span><span class="va">api_testing_files</span></span></code></pre></div>
<pre><code>[[1]]

── File ────────────────────────────────────────────────────────────────────────────────────────────────
• type: file
• parent: 61f3f9c6e6aad23247516bf30
• url: NA
• modified_on: 2023-04-15T08:54:32Z
• created_on: 2023-04-11T10:04:50Z
• project: &lt;username_or_division&gt;/api-testing
• size: 56 bytes
• name: Drop-seq_small_example.bam
• id: 643530c28345522d97313d17
• href: https://api.sbgenomics.com/v2/files/643530c28345522d97313d17

[[2]]

── File ────────────────────────────────────────────────────────────────────────────────────────────────
• type: file
• parent: 61f3f9c6e6aae54367516bf30
• url: NA
• modified_on: 2023-04-11T10:29:13Z
• created_on: 2023-04-11T10:29:13Z
• project: &lt;username_or_division&gt;/api-testing
• size: 56 bytes
• name: G20479.HCC1143.2_1Mreads.tar.gz
• id: 6435367943r4456ecb66cfb2
• href: https://api.sbgenomics.com/v2/files/6435367943r4456ecb66cfb2
</code></pre>
<p>Note that this call lists both <code>files</code> and
<code>subdirectories</code> in the specified project or directory within
a project, but <strong>not the contents of the subdirectories</strong>.
To list the contents of a subdirectory, make a new call and specify the
subdirectory as the <code>parent</code> parameter.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List files in a subdirectory</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span>parent <span class="op">=</span> <span class="st">"&lt;parent_directory_object_or_id&gt;"</span><span class="op">)</span></span></code></pre></div>
<p>You can also try and find a file with specific:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Name</strong> - List the file with the specified name. Note
that the name must be an exact complete string for the results to
match.</li>
<li>
<strong>Metadata</strong> - List only files that have the specified
value in a metadata field. Note that multiple instances of the same
metadata field are implicitly separated by the OR operation. Conversely,
different metadata fields are implicitly separated by the AND
operation.</li>
<li>
<strong>Tag</strong> - List files containing the specified tag. Note
that the tag must be an exact complete string for the results to match.
The OR operation is performed between multiple tags.</li>
<li>
<strong>Origin task</strong> - List only files produced by the task
specified by the ID in this field.</li>
</ol>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List files with these names</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span></span>
<span>  project <span class="op">=</span> <span class="st">"&lt;project_object_or_id"</span>,</span>
<span>  name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"&lt;file_name1&gt;"</span>, <span class="st">"&lt;file_name2&gt;"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># List files with metadata fields sample_id and library values set</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span></span>
<span>  project <span class="op">=</span> <span class="st">"&lt;project_object_or_id&gt;"</span>,</span>
<span>  metadata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"sample_id"</span> <span class="op">=</span> <span class="st">"&lt;sample_id_value&gt;"</span>,</span>
<span>    <span class="st">"library"</span> <span class="op">=</span> <span class="st">"&lt;library_value&gt;"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># List files with this tag</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span>project <span class="op">=</span> <span class="st">"&lt;project_object_or_id&gt;"</span>, tag <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"&lt;tag_value&gt;"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># List files from this task</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span>project <span class="op">=</span> <span class="st">"&lt;project_object_or_id&gt;"</span>, task <span class="op">=</span> <span class="st">"&lt;task_object_or_id&gt;"</span><span class="op">)</span></span></code></pre></div>
<p>To combine everything in a more realistic example - the following
code gives us all files in the <code>user1/api-testing</code> project
that have sample_id metadata set to “Sample1” <strong>OR</strong>
“Sample2”, <strong>AND</strong> the library id “EXAMPLE”,
<strong>AND</strong> have either “hello” <strong>OR</strong> “world”
tag:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Query project files according to described criteria</span></span>
<span><span class="va">my_files</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span></span>
<span>  project <span class="op">=</span> <span class="st">"user1/api-testing"</span>,</span>
<span>  metadata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    sample_id <span class="op">=</span> <span class="st">"Sample1"</span>,</span>
<span>    sample_id <span class="op">=</span> <span class="st">"Sample2"</span>,</span>
<span>    library_id <span class="op">=</span> <span class="st">"EXAMPLE"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  tag <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hello"</span>, <span class="st">"world"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
<div class="section level4">
<h4 id="list-public-data">List public data<a class="anchor" aria-label="anchor" href="#list-public-data"></a>
</h4>
<p>To list publicly available files on the Seven Bridges Platform, set
the project parameter to <code>admin/sbg-public-data</code>.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Query public files</span></span>
<span><span class="va">public_files</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span>project <span class="op">=</span> <span class="st">"admin/sbg-public-data"</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
</div>
<div class="section level3">
<h3 id="get-a-single-filefolder">Get a single file/folder<a class="anchor" aria-label="anchor" href="#get-a-single-filefolder"></a>
</h3>
<p>To return a specific file or folder, knowing their ID, you can use
the <code><a href="https://rdrr.io/r/base/get.html" class="external-link">get()</a></code> method, same as for other resources. File id can
also be extracted from the URL in the Platform’s visual interface.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get a single File object by ID</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"&lt;file_id&gt;"</span><span class="op">)</span></span></code></pre></div>
<pre><code>── File ────────────────────────────────────────────────────────────────────────────────────────────────────────
• type: file
• parent: 61f3f9c6e6aad8667516rf543
• url: NA
• modified_on: 2023-04-11T10:29:13Z
• created_on: 2023-04-11T10:29:13Z
• project: &lt;username_or_division&gt;/api-testing
• size: 56 bytes
• name: G20479.HCC1143.2_1Mreads.tar.gz
• id: 6435367997d934334fb66cfb2
• href: https://api.sbgenomics.com/v2/files/6435367997d934334fb66cfb2</code></pre>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level3">
<h3 id="delete-a-file">Delete a file<a class="anchor" aria-label="anchor" href="#delete-a-file"></a>
</h3>
<p>The <code>delete</code> action only works for one file at a time. It
can be called from the <code>Auth$files</code> path and accepts the
<code>File</code> object or ID of the file you want to delete.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Delete a file</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">delete</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"&lt;file_object_or_id&gt;"</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level3">
<h3 id="copy-files">Copy files<a class="anchor" aria-label="anchor" href="#copy-files"></a>
</h3>
<p>The <code>copy()</code> method allows you to copy multiple files
between projects at a time. It can also be called from the
<code>Auth$files</code> path and accepts a list of File objects or their
ids within the <code>files</code> parameter. Besides this, you have to
specify the destination project too. The result will contain a printed
response with information about the copied files - their destination
names and ids.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fetch files by id to copy into the api-testing project</span></span>
<span><span class="va">file1</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"6435367997d9446ecb66cfb2"</span><span class="op">)</span></span>
<span><span class="va">file2</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"6435367997d9446ecb66cgr2"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Copy files to the project</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">copy</span><span class="op">(</span></span>
<span>  files <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">file1</span>, <span class="va">file2</span><span class="op">)</span>,</span>
<span>  destination_project <span class="op">=</span> <span class="st">"&lt;username_or_division&gt;/api-testing"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level3">
<h3 id="create-a-folder-within-the-destination-project-or-parent-folder">Create a folder within the destination project or parent folder<a class="anchor" aria-label="anchor" href="#create-a-folder-within-the-destination-project-or-parent-folder"></a>
</h3>
<p>To create a new folder on the Platform, use the
<code>Auth$files</code> method <code>create_folder()</code>. It allows
you to create a new folder on the Platform within the root folder of a
specified destination project or the provided parent folder. Remember
that you should provide either the destination project (as the
<code>project</code> parameter) or the destination folder (as the
<code>parent</code> parameter), not both.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Option 1 - Using the project parameter</span></span>
<span></span>
<span><span class="co"># Option 1.a (providing a Project object as the project parameter)</span></span>
<span><span class="va">my_project</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">projects</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span>project <span class="op">=</span> <span class="st">"&lt;username_or_division&gt;/api-testing"</span><span class="op">)</span></span>
<span><span class="va">demo_folder</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">create_folder</span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"my_new_folder"</span>,</span>
<span>  project <span class="op">=</span> <span class="va">my_project</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Option 1.b (providing a project's ID as the project parameter)</span></span>
<span><span class="va">demo_folder</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">create_folder</span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"my_new_folder"</span>,</span>
<span>  project <span class="op">=</span> <span class="st">"&lt;username_or_division&gt;/api-testing"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Alternatively, you can provide the <code>parent</code> parameter to
specify the destination where the new folder is going to be created. The
<code>parent</code> parameter can be either a File object (must be of
type <code>folder</code>) or an ID of the parent destination folder.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Option 2 - Using the parent parameter</span></span>
<span></span>
<span><span class="co"># Option 2.a (providing a File (must be a folder) object as parent parameter)</span></span>
<span><span class="va">my_parent_folder</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"&lt;folder_id&gt;"</span><span class="op">)</span></span>
<span><span class="va">demo_folder</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">create_folder</span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"my_new_folder"</span>,</span>
<span>  parent <span class="op">=</span> <span class="va">my_parent_folder</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Option 2.b (providing a file's (folder's) ID as project parameter)</span></span>
<span><span class="va">demo_folder</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">create_folder</span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"my_new_folder"</span>,</span>
<span>  parent <span class="op">=</span> <span class="st">"&lt;folder_id&gt;"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level3">
<h3 id="file-object-operations">File object operations<a class="anchor" aria-label="anchor" href="#file-object-operations"></a>
</h3>
<p>Let’s see now all available operations on the <code>File</code>
objects that can be called.</p>
<div class="section level4">
<h4 id="file-print">File print<a class="anchor" aria-label="anchor" href="#file-print"></a>
</h4>
<p>File object has a regular <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> method which gives you
most important information about the file:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get some file</span></span>
<span><span class="va">demo_file</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"&lt;file_id&gt;"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Regular file print</span></span>
<span><span class="va">demo_file</span><span class="op">$</span><span class="fu">print</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>── File ────────────────────────────────────────────────────────────────────────────────────────────────
• type: file
• parent: 61f3f9c6e6aad86675453ff30
• url: NA
• modified_on: 2023-04-15T08:54:32Z
• created_on: 2023-04-11T10:04:50Z
• project: &lt;username_or_division&gt;/api-testing
• size: 56 bytes
• name: Drop-seq_small_example.bam
• id: 643530c286c9522d9222213d17
• href: https://api.sbgenomics.com/v2/files/643530c286c9522d9222213d17</code></pre>
<p>But if you want to see all the details about a file in a specific
format, you can use the <code>detailed_print()</code> method:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Pretty print</span></span>
<span><span class="va">demo_file</span><span class="op">$</span><span class="fu">detailed_print</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>── File ────────────────────────────────────────────────────────────────────────────────────────────────────────
• type: file
• parent: 61f3f9c6e6aad86675453ff30
• url: NA
• modified_on: 2023-04-15T08:54:32Z
• created_on: 2023-04-11T10:04:50Z
• project: &lt;username_or_division&gt;/api-testing
• size: 56 bytes
• name: Drop-seq_small_example.bam
• id: 643530c286c9522d9222213d17
• href: https://api.sbgenomics.com/v2/files/643530c286c9522d9222213d17
• tags
  • tag_1: TEST
  • tag_2: SEQ
• metadata
  • reference_genome: GSM1629193_hg19_ERCC
  • investigation: GSM1629193
  • md5_sum: 6294fee8200b29e03d3dc464f9c46a9c
  • sbg_public_files_category: test
• storage
  • type: PLATFORM
  • hosted_on_locations: list("aws:us-east-1", "aws:us-west-2")</code></pre>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="update-file-details">Update file details<a class="anchor" aria-label="anchor" href="#update-file-details"></a>
</h4>
<p>You can call the <code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code> function on the File object.
With this call, the following can be updated:</p>
<ul>
<li>The file’s <code>name</code>,</li>
<li>The file’s <code>metadata</code>,</li>
<li>The file’s <code>tags</code>.</li>
</ul>
<p>Read more details about this method in our <a href="https://docs.sevenbridges.com/reference/update-file-details" class="external-link">API
documentation</a>.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Update file name</span></span>
<span><span class="va">demo_file</span><span class="op">$</span><span class="fu">update</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"&lt;new_name&gt;"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Update file metadata</span></span>
<span><span class="va">demo_file</span><span class="op">$</span><span class="fu">update</span><span class="op">(</span></span>
<span>  metadata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"&lt;metadata_field&gt;"</span> <span class="op">=</span> <span class="st">"&lt;metadata_field_value"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Update file tags</span></span>
<span><span class="va">demo_file</span><span class="op">$</span><span class="fu">update</span><span class="op">(</span>tags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"&lt;tag_value&gt;"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="add-tags-to-a-file">Add tags to a file<a class="anchor" aria-label="anchor" href="#add-tags-to-a-file"></a>
</h4>
<p>You can tag your files with keywords or strings to make it easier to
identify and organize files. Tags are different from metadata and are
more convenient and visible from the files list in the visual
interface.</p>
<p>You can tag your files using the <code>add_tag()</code> method. This
method will automatically just add a new tag to a list of already
existing ones, but you also have the option to set the
<code>overwrite</code> parameter, which will erase old ones and set the
new one.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add a new tag to a file</span></span>
<span><span class="va">demo_file</span><span class="op">$</span><span class="fu">add_tag</span><span class="op">(</span>tags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"new_tag"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add a new tag to a file and overwrite old ones</span></span>
<span><span class="va">demo_file</span><span class="op">$</span><span class="fu">add_tag</span><span class="op">(</span>tags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"new_tag"</span><span class="op">)</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Delete all tags - just set tags to NULL</span></span>
<span><span class="va">demo_file</span><span class="op">$</span><span class="fu">add_tag</span><span class="op">(</span>tags <span class="op">=</span> <span class="cn">NULL</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="copy-a-single-file-between-projects">Copy a single file between projects<a class="anchor" aria-label="anchor" href="#copy-a-single-file-between-projects"></a>
</h4>
<p>This call copies the specified file to a new project. Files retain
their metadata when copied, but may be assigned new names in their
target project. If you don’t specify a new name, the file will retain
its old name in the new project. To make this call, you should have the
<a href="https://docs.sevenbridges.com/docs/set-permissions" class="external-link">copy
permission</a> within the project you are copying from. This call
returns the <code>File</code> object of the newly copied file.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Copy a file to a new project and set a new name</span></span>
<span><span class="va">demo_file</span><span class="op">$</span><span class="fu">copy_to</span><span class="op">(</span></span>
<span>  project <span class="op">=</span> <span class="st">"&lt;destination_project_object_or_id&gt;"</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"&lt;new_name&gt;"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="get-downloadable-url-for-a-file">Get downloadable URL for a file<a class="anchor" aria-label="anchor" href="#get-downloadable-url-for-a-file"></a>
</h4>
<p>To get a URL that you can use to download the specified file, you can
use the <code>get_download_url()</code> method. This will set the
<code>url</code> parameter in the File object and can later be used to
download the file.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get downloadable URL for a file</span></span>
<span><span class="va">demo_file</span><span class="op">$</span><span class="fu">get_download_url</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="get-a-files-metadata">Get a file’s metadata<a class="anchor" aria-label="anchor" href="#get-a-files-metadata"></a>
</h4>
<p>Files from curated datasets on Seven Bridges environments have a
defined set of metadata which is visible in the visual interface of each
environment.</p>
<p><code>File</code> object has the <code>get_metadata()</code> method
which returns the metadata values for the specified file. This will pull
and reload file’s metadata from the platform.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get file metadata</span></span>
<span><span class="va">demo_file</span><span class="op">$</span><span class="fu">get_metadata</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="modify-file-metadata">Modify file metadata<a class="anchor" aria-label="anchor" href="#modify-file-metadata"></a>
</h4>
<p>You can also pass additional metadata for each file which is stored
with your copy of the file in your project.</p>
<p>To modify a file’s metadata use the <code>set_metadata()</code>
method. Here you can also use the <code>overwrite</code> parameter if
you want to erase previous metadata fields and add a new one (by default
it’s set to <code>FALSE</code>).</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set file metadata</span></span>
<span><span class="va">demo_file</span><span class="op">$</span><span class="fu">set_metadata</span><span class="op">(</span></span>
<span>  metadata_fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"&lt;metadata_field&gt;"</span> <span class="op">=</span> <span class="st">"metadata_field_value"</span><span class="op">)</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="list-folder-contents">List folder contents<a class="anchor" aria-label="anchor" href="#list-folder-contents"></a>
</h4>
<p>Directories can have multiple
<code>files</code>/<code>subdirectories</code> inside. You can see them
using the <code>list_contents()</code> method. Note that this operation
will work only on <code>File</code> objects whose type is
<code>folder</code>. The result will also be a <code>Collection</code>
class object containing a list of File objects in the <code>items</code>
field.</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List folder contents</span></span>
<span><span class="va">demo_folder</span><span class="op">$</span><span class="fu">list_contents</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="move-a-file-into-a-folder">Move a file into a folder<a class="anchor" aria-label="anchor" href="#move-a-file-into-a-folder"></a>
</h4>
<p>This call moves a file from one folder to another. Moving folders is
not allowed by the API. Moving of files is only allowed within the same
project. Parent parameter must be a folder id or a <code>File</code>
object whose type is <code>folder</code>. A file can also be renamed at
the destination by setting the <code>name</code> argument.</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Move a file to a folder</span></span>
<span><span class="va">demo_file</span><span class="op">$</span><span class="fu">move_to_folder</span><span class="op">(</span></span>
<span>  parent <span class="op">=</span> <span class="st">"&lt;parent_file_object_or_id&gt;"</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"Moved_file.txt"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="download-a-file">Download a file<a class="anchor" aria-label="anchor" href="#download-a-file"></a>
</h4>
<p><code>File</code> object has a <code>download()</code> method, which
allows you to download that file to your local computer. You should
provide the <code>directory_path</code> parameter, which specifies the
destination directory to which your file will be downloaded. By default,
this parameter is set to your current working directory. You can also
set the new name for your resulting (downloaded) file by providing the
<code>filename</code> parameter. Otherwise, the default name (the one
stored in the <code>name</code> field of your <code>File</code> object)
will be used.</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Download a file</span></span>
<span><span class="va">demo_file</span><span class="op">$</span><span class="fu">download</span><span class="op">(</span>directory_path <span class="op">=</span> <span class="st">"/path/to/your/destination/folder"</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="get-a-files-parent-directory">Get a file’s parent directory<a class="anchor" aria-label="anchor" href="#get-a-files-parent-directory"></a>
</h4>
<p>Sometimes, it’s convenient to get the parent folder ID for a file or
folder: This information is stored in the <code>parent</code> field of
the <code>File</code> object.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get a file's parent directory</span></span>
<span><span class="va">demo_file</span><span class="op">$</span><span class="va">parent</span></span></code></pre></div>
<pre><code>[1] "5bd7c53ee4b04b8fb1a9f454x"</code></pre>
<p>This is essentially the root folder ID. Alternatively, to get the
parent folder as an object, use:</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get a folder object</span></span>
<span><span class="va">parent_folder</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="va">demo_file</span><span class="op">$</span><span class="va">parent</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="delete-a-filefolder">Delete a file/folder<a class="anchor" aria-label="anchor" href="#delete-a-filefolder"></a>
</h4>
<p>User can delete files and folders using the <code>delete()</code>
method directly on the <code>File</code> object. Please be aware that
<code>folder</code> can only be deleted if it’s empty.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Delete a file</span></span>
<span><span class="va">demo_file</span><span class="op">$</span><span class="fu">delete</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Delete a folder</span></span>
<span><span class="va">demo_folder</span><span class="op">$</span><span class="fu">delete</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="reload-a-file">Reload a file<a class="anchor" aria-label="anchor" href="#reload-a-file"></a>
</h4>
<p>To keep your local <code>File</code> object up to date with the file
on the platform, you can always call the <code>reload()</code>
function:</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Reload file/folder objects</span></span>
<span><span class="va">demo_file</span><span class="op">$</span><span class="fu">reload</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">demo_folder</span><span class="op">$</span><span class="fu">reload</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="apps">Apps<a class="anchor" aria-label="anchor" href="#apps"></a>
</h2>
<p>Following the same logic as with other <code>Resource</code> classes,
all apps related operations are grouped under the <code>Apps</code>
class, that can be accessed within <code>Auth</code> objects on the
<code>Auth$apps</code> path. From here you can call operations to list
all apps, fetch single app by its id, copy or create a new app.</p>
<p>When you operate with a single app, it is represented as an object of
<code>App</code> class. The <code>App</code> object contains almost all
app information and additional methods that can be executed directly on
the object, such as getting or creating new app revisions, copying,
syncing with the latest revision or creating tasks with this app,
etc.</p>
<p>Note that we say almost all information, because we don’t return all
fields by default for apps - the raw CWL field is excluded due to its
size and speed of execution. Therefore, if you wish to fetch the raw CWL
of an app, there is a separate method for this purpose that you can call
on the App object (<code>get_raw_cwl()</code>).</p>
<div class="section level3">
<h3 id="list-apps">List apps<a class="anchor" aria-label="anchor" href="#list-apps"></a>
</h3>
<p>You can list all apps available to you by calling the
<code>apps$query()</code> method from the authentication object. The
method has several parameters that allow you to search for apps in
various places and by specified search terms.</p>
<p>Note that you can see all of the publicly available apps on the Seven
Bridges Platform by setting the <code>visibility</code> parameter to
<code>public</code>. If you omit this parameter (it will use the default
value <code>private</code>), and you will see all your private apps,
i.e. those in projects that you can access. Learn more about public apps
in our documentation.</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Query public apps - set visibility parameter to "public"</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">apps</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span>visibility <span class="op">=</span> <span class="st">"public"</span>, limit <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>The same can be done for private apps. The following call will return
all the apps available to you, i.e. all the apps that you have in your
projects:</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Query private apps</span></span>
<span><span class="va">my_apps</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">apps</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Just to remind you that not all of the available apps are going to be
returned, because the <code>limit</code> parameter is set to 50 by
default. Since the result is a <code>Collection</code> object, you can
navigate through results by calling <code>next_page()</code> and
<code>prev_page()</code> or call <code><a href="https://rdrr.io/r/base/all.html" class="external-link">all()</a></code> to return all
results.</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load next 50 apps</span></span>
<span><span class="va">my_apps</span><span class="op">$</span><span class="fu">next_page</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Alternatively, you can query all the apps in a specific project by
providing the project of interest using the <code>project</code>
parameter. You can either use the <code>Project</code> object, or a
project ID (string).</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Query apps within your project - set limit to 10</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">apps</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span>project <span class="op">=</span> <span class="st">"&lt;project_object_or_its_ID&gt;"</span>, limit <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>You can also use one or more search terms via the
<code>query_terms</code> parameter to query all apps that are available
to you. Search terms should relate to the following app details:</p>
<ul>
<li>name</li>
<li>label</li>
<li>toolkit</li>
<li>toolkit version</li>
<li>category</li>
<li>tagline</li>
<li>description</li>
</ul>
<p>For example, to get public apps that contain the term
<strong>“VCFtools”</strong> anywhere in the app details, you can make a
call similar to this one:</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List public apps containing the term "VCFtools" in app's details</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">apps</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span>visibility <span class="op">=</span> <span class="st">"public"</span>, query_terms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"VCFtools"</span><span class="op">)</span>, limit <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>For the query to return results, each term must match at least one of
the fields that describe an app. For example, the first term can match
the app’s name while the second one can match the app description.
However, if any part of the search fails to match app details, the call
will return an empty list.</p>
<p>Another useful option is to query apps by id. You can do so either
for public apps, or for private apps (apps available to you). The
following example illustrates how this can be done for public apps:</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List files in project root directory</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">apps</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span></span>
<span>  visibility <span class="op">=</span> <span class="st">"public"</span>,</span>
<span>  id <span class="op">=</span> <span class="st">"admin/sbg-public-data/vcftools-convert"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
<div class="section level4">
<h4 id="list-project-apps">List project apps<a class="anchor" aria-label="anchor" href="#list-project-apps"></a>
</h4>
<p>All available apps in a specific project can also be listed by
calling the <code>list_apps()</code> method directly on the
<code>Project</code> object. This method has the <code>project</code>
and <code>visibility</code> arguments predefined, while all other
parameters are identical to those presented in the
<code>apps$query()</code> function.</p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get project</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">projects</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"&lt;username_or_division&gt;/api-testing"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># List apps in the specified project</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="fu">list_apps</span><span class="op">(</span>limit <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
</div>
<div class="section level3">
<h3 id="get-app-information">Get app information<a class="anchor" aria-label="anchor" href="#get-app-information"></a>
</h3>
<p>If you need information about a specific app, you can get it using
the <code>apps$get()</code> method. Keep in mind that the app should be
in a project that you can access. This could be an app that has been
uploaded to the Seven Bridges Platform by a project member, or a
publicly available app. You should provide the <code>id</code> of the
app of interest, and optionally its <code>revision</code>. If no
revision is specified, the latest one will be used.</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get a public App object</span></span>
<span><span class="va">bcftools_app</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">apps</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"admin/sbg-public-data/bcftools-call-1-15-1"</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level3">
<h3 id="copy-an-app">Copy an app<a class="anchor" aria-label="anchor" href="#copy-an-app"></a>
</h3>
<p>To copy an app to a specified destination project, you can use the
<code>apps$copy()</code> method.</p>
<p>Keep in mind that the app should be in a project that you can access.
This could be an app that has been uploaded to the Seven Bridges
Platform by a project member, or a publicly available app.</p>
<p>Destination project (<code>project</code> parameter) should be
provided either as an object of the <code>Project</code> class, or as an
ID of the target project of interest.</p>
<p>You might want to set the new name that the app will have in the
target project. To do so, use the <code>name</code> parameter. If the
app’s name will not change, omit the <code>name</code> parameter.</p>
<p>Keep in mind that there are different strategies for copying the apps
on the platform:</p>
<ul>
<li>
<code>clone</code> : copy all revisions; get updates from the same
app as the copied app (default)</li>
<li>
<code>direct</code>: copy latest revision; get updates from the
copied app</li>
<li>
<code>clone_direct</code>: copy all revisions; get updates from the
copied app</li>
<li>
<code>transient</code>: copy latest revision; get updates from the
same app as the copied app</li>
</ul>
<p>Learn more about copy strategies in our public <a href="https://docs.sevenbridges.com/reference/copy-an-app" class="external-link">API
documentation</a>.</p>
<p>The following example demonstrates how can you copy the previously
created <code>bcftools_app</code> to a project:</p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Copy an app to a project</span></span>
<span><span class="va">app_copy</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">apps</span><span class="op">$</span><span class="fu">copy</span><span class="op">(</span><span class="va">bcftools_app</span>,</span>
<span>  project <span class="op">=</span> <span class="st">"&lt;project_object_or_its_ID&gt;"</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"New_app_name"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level3">
<h3 id="create-new-app">Create new app<a class="anchor" aria-label="anchor" href="#create-new-app"></a>
</h3>
<p>The <code>apps$create()</code> method allows you to add an app using
raw CWL.</p>
<p>The raw CWL can be provided either through the <code>raw</code>
parameter, or by using the <code>file_path</code> parameter. Keep in
mind that these two parameters should not be used together.</p>
<p>If you choose to use the <code>raw</code> parameter, make sure to
provide a list containing raw CWL for the app you are about to create.
To generate such a list, you might want to load an existing
<code>JSON</code> / <code>YAML</code> file. In case that your CWL file
is in JSON format, please use the <code>fromJSON</code> function from
the <code>jsonlite</code> package to minimize potential problems with
parsing the JSON file. If you want to load a CWL file in YAML format, it
is highly recommended to use the <code>read_yaml</code> function from
the <code>yaml</code> package.</p>
<p>Make sure to set the <code>raw_format</code> parameter to match the
type of the provided raw CWL file (<code>JSON</code> /
<code>YAML</code>). By default, this parameter is set to
<code>JSON</code>.</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load the JSON file</span></span>
<span><span class="va">file_json</span> <span class="op">&lt;-</span> <span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jsonlite/man/read_json.html" class="external-link">read_json</a></span><span class="op">(</span><span class="st">"/path/to/your/raw_cwl_in_json_format.cwl"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create app from raw CWL (JSON)</span></span>
<span><span class="va">new_app_json</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">apps</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span></span>
<span>  project <span class="op">=</span> <span class="st">"&lt;destination_project_object_or_its_ID&gt;"</span>,</span>
<span>  raw <span class="op">=</span> <span class="va">file_json</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"New_app_json"</span>,</span>
<span>  raw_format <span class="op">=</span> <span class="st">"JSON"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>If you opt for the <code>file_path</code> parameter instead, you
should provide a path to a file containing the raw CWL for the app
(<code>JSON</code> or <code>YAML</code>).</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create an app from raw CWL (YAML)</span></span>
<span><span class="va">new_app_yaml</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">apps</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span></span>
<span>  project <span class="op">=</span> <span class="st">"&lt;destination_project_object_or_its_ID&gt;"</span>,</span>
<span>  from_path <span class="op">=</span> <span class="st">"/path/to/your/raw_cwl_in_yaml_format.cwl"</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"New_app_yaml"</span>,</span>
<span>  raw_format <span class="op">=</span> <span class="st">"YAML"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
<div class="section level4">
<h4 id="create-an-app-in-a-project">Create an app in a project<a class="anchor" aria-label="anchor" href="#create-an-app-in-a-project"></a>
</h4>
<p>The app can also be directly created on a <code>Project</code> object
by invoking <code>create_app()</code>. Except for the predefined
<code>project</code> parameter, the <code>create_app()</code> has the
same other parameters as <code>apps$create()</code>.</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load the JSON file</span></span>
<span><span class="va">file_json</span> <span class="op">&lt;-</span> <span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jsonlite/man/read_json.html" class="external-link">read_json</a></span><span class="op">(</span><span class="st">"/path/to/your/raw_cwl_in_json_format.cwl"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get project</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">projects</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"&lt;username_or_division&gt;/api-testing"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create app from raw CWL (JSON) in specified project</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="fu">create_app</span><span class="op">(</span></span>
<span>  raw <span class="op">=</span> <span class="va">file_json</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"New_app_json"</span>,</span>
<span>  raw_format <span class="op">=</span> <span class="st">"JSON"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
</div>
<div class="section level3">
<h3 id="app-object-operations">App object operations<a class="anchor" aria-label="anchor" href="#app-object-operations"></a>
</h3>
<p>Once you’ve fetched the <code>App</code> object, you’ll see that it
also has various useful methods within itself.</p>
<p>The following actions are available for an App object:</p>
<ul>
<li>print</li>
<li>input_matrix</li>
<li>output_matrix</li>
<li>get_revision</li>
<li>create_revision</li>
<li>copy</li>
<li>sync</li>
<li>create_task</li>
<li>reload</li>
</ul>
<div class="section level4">
<h4 id="print-an-app">Print an app<a class="anchor" aria-label="anchor" href="#print-an-app"></a>
</h4>
<p>The <code>print</code> method prints the app details to the
console.</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fetch the first app from project's apps</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">projects</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"&lt;username_or_division&gt;/api-testing"</span><span class="op">)</span></span>
<span><span class="va">my_apps</span> <span class="op">&lt;-</span> <span class="va">p</span><span class="op">$</span><span class="fu">list_apps</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">my_new_app</span> <span class="op">&lt;-</span> <span class="va">my_apps</span><span class="op">$</span><span class="va">items</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Print app's details</span></span>
<span><span class="va">my_new_app</span><span class="op">$</span><span class="fu">print</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>── App ──────────────────────────────────────────────────────────────────────────────────────────────────────
• revision: 0
• name: BCFtools Call
• project: &lt;username_or_division&gt;/api-testing
• id: &lt;username_or_division&gt;/api-testing/new_app_json
• href: https://api.sbgenomics.com/v2/apps/&lt;username_or_division&gt;/api-testing/new_app_json/0</code></pre>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="get-an-apps-raw-cwl">Get an app’s raw CWL<a class="anchor" aria-label="anchor" href="#get-an-apps-raw-cwl"></a>
</h4>
<p>If the app’s <code>raw</code> field is empty, just call the
<code>reload()</code> method, to fetch app’s raw CWL.</p>
</div>
<div class="section level4">
<h4 id="preview-apps-inputs-and-expected-outputs">Preview app’s inputs and expected outputs<a class="anchor" aria-label="anchor" href="#preview-apps-inputs-and-expected-outputs"></a>
</h4>
<p>Usually, for most of the tasks, some inputs should be defined, which
are required by the app. Information about which inputs are required or
optional to be set for the app is stored in its CWL. However, we have
provided a utility function <code>input_matrix()</code> on the
<code>App</code> object that can parse this information and return the
app’s input matrix for you. This way, users will know how to construct
the list of inputs (how to name them and make them available within
files) when creating the task.</p>
<p><strong>NOTE</strong> that <code>id</code> field in the data frame is
the name you should use when specifying task inputs.</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get app's inputs details</span></span>
<span><span class="va">my_new_app</span><span class="op">$</span><span class="fu">input_matrix</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>id                                      label           required    type
in_variants                      Input Mpileup VCF file     TRUE      File
regions_file                          Regions from file    FALSE     File?
output_name                           Output file name    FALSE   string?
output_type                                Output type    FALSE      enum
regions                         Regions for processing    FALSE string[]?
...</code></pre>
<p>Besides id and label describing the input, you can see whether the
input is required or not and which type is expected. For most of the
inputs, if you notice that <code>type</code> field contains ‘?’, it
means that the field is optional.</p>
<p>There is another utility operation on the <code>App</code> object to
list expected outputs of an app or task. This information can be
received by calling the <code>output_matrix()</code> method:</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get app's outputs details</span></span>
<span><span class="va">my_new_app</span><span class="op">$</span><span class="fu">output_matrix</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>                     id                    label      type
1        summary_metrics          Summary Metrics      File
2  out_filtered_variants      Output filtered VCF     File?
3            html_report              HTML report     File?
...</code></pre>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="get-an-app-revision">Get an app revision<a class="anchor" aria-label="anchor" href="#get-an-app-revision"></a>
</h4>
<p>To obtain a particular revision of an app, use the
<code>get_revision()</code> method and set the <code>revision</code>
parameter to the number of the version you want to get.</p>
<p>Keep in mind that there is another important parameter that can be
set for this method. If the <code>in_place</code> parameter is set to
<code>TRUE</code>, the current app object will be replaced with the new
one for specified app revision. By default, this parameter is set to
<code>FALSE</code>.</p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get an app revision</span></span>
<span><span class="va">my_app</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">apps</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"&lt;username_or_division&gt;/api-testing/new_app_json/0"</span><span class="op">)</span></span>
<span><span class="va">my_app</span><span class="op">$</span><span class="fu">print</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>── App ──────────────────────────────────────────────────────────────────────────────────────────────────────
• latest_revision: 1
• copy_of: admin/sbg-public-data/bcftools-call-1-15-1/0
• revision: 0
• name: BCFtools Call
• project: &lt;username_or_division&gt;/api-testing
• id: &lt;username_or_division&gt;/api-testing/new_app_json
• href: https://api.sbgenomics.com/v2/apps/&lt;username_or_division&gt;/api-testing/new_app_json/0</code></pre>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get an app revision</span></span>
<span><span class="va">my_app</span><span class="op">$</span><span class="fu">get_revision</span><span class="op">(</span>revision <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get an app revision and update the object</span></span>
<span><span class="va">my_app</span><span class="op">$</span><span class="fu">get_revision</span><span class="op">(</span>revision <span class="op">=</span> <span class="fl">1</span>, in_place <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>── App ──────────────────────────────────────────────────────────────────────────────────────────────────────
• latest_revision: 1
• copy_of: admin/sbg-public-data/bcftools-call-1-15-1/0
• revision: 1
• name: BCFtools Call
• project: &lt;username_or_division&gt;/api-testing
• id: &lt;username_or_division&gt;/api-testing/new_app_json
• href: https://api.sbgenomics.com/v2/apps/&lt;username_or_division&gt;/api-testing/new_app_json/1</code></pre>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="create-an-app-revision">Create an app revision<a class="anchor" aria-label="anchor" href="#create-an-app-revision"></a>
</h4>
<p>The <code>create_revision()</code> method allows you to create a new
revision for an existing app.</p>
<p>The raw CWL can be provided either through the <code>raw</code>
parameter, or by using the <code>file_path</code> parameter. Keep in
mind that these two parameters should not be used together.</p>
<p>If you choose to use the <code>raw</code> parameter, make sure to
provide a list containing raw CWL for the app revision you are about to
create. To generate such a list, you might want to load an existing
<code>JSON</code> / <code>YAML</code> file. In case that your CWL file
is in JSON format, please use the <code>fromJSON</code> function from
the <code>jsonlite</code> package to minimize potential problems with
parsing the JSON file. If you want to load a CWL file in YAML format, it
is highly recommended to use the <code>read_yaml</code> function from
the <code>yaml</code> package.</p>
<p>Make sure to set the <code>raw_format</code> parameter to match the
type of the provided raw CWL file (<code>JSON</code> /
<code>YAML</code>). By default, this parameter is set to
<code>JSON</code>.</p>
<p>Using <code>in_place</code> parameter will overwrite the current app
object with new app revision information.</p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create an app revision from a file</span></span>
<span><span class="va">raw_cwl_as_list</span> <span class="op">&lt;-</span> <span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jsonlite/man/read_json.html" class="external-link">read_json</a></span><span class="op">(</span></span>
<span>  path <span class="op">=</span> <span class="st">"/path/to/your/raw_cwl_in_json_format.cwl"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">my_app</span><span class="op">$</span><span class="fu">create_revision</span><span class="op">(</span>raw <span class="op">=</span> <span class="va">raw_cwl_as_list</span>, in_place <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>If you opt for the <code>file_path</code> parameter instead, you
should provide a path to a file containing the raw CWL for the app
(<code>JSON</code> or <code>YAML</code>).</p>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a new revision for an existing app</span></span>
<span><span class="va">my_app</span><span class="op">$</span><span class="fu">create_revision</span><span class="op">(</span></span>
<span>  from_path <span class="op">=</span> <span class="st">"/path/to/your/raw_cwl_in_json_format.cwl"</span>,</span>
<span>  in_place <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="copy-an-app-1">Copy an app<a class="anchor" aria-label="anchor" href="#copy-an-app-1"></a>
</h4>
<p>An app can be copied to a specified destination project directly from
an app’s object too, by calling its own <code>copy()</code>method.</p>
<p>Destination project (<code>project</code> parameter) should be
provided either as an object of the <code>Project</code> class, or as an
ID of the target project of interest.</p>
<p>You can set the new name that the app will have in the target project
with the <code>name</code> parameter. Keep in mind that are different
strategies for copying apps on the platform:</p>
<ul>
<li>
<code>clone</code> : copy all revisions; get updates from the same
app as the copied app (default)</li>
<li>
<code>direct</code>: copy latest revision; get updates from the
copied app</li>
<li>
<code>clone_direct</code>: copy all revisions; get updates from the
copied app</li>
<li>
<code>transient</code>: copy latest revision; get updates from the
same app as the copied app</li>
</ul>
<p>Learn more about copy strategies in our public <a href="https://docs.sevenbridges.com/reference/copy-an-app" class="external-link">API
documentation</a>.</p>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Copy app</span></span>
<span><span class="va">copied_app</span> <span class="op">&lt;-</span> <span class="va">my_app</span><span class="op">$</span><span class="fu">copy</span><span class="op">(</span></span>
<span>  project <span class="op">=</span> <span class="st">"&lt;destination_project_object_or_its_ID&gt;"</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"New_app_name"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="sync-a-copied-app">Sync a copied app<a class="anchor" aria-label="anchor" href="#sync-a-copied-app"></a>
</h4>
<p>To synchronize a copied app with the source app from which it has
been copied, so it uses the latest revision, you can call the
<code>sync()</code> method. The <code>App</code> object will be
overwritten with the latest app.</p>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Sync a copied app to the latest revision created</span></span>
<span><span class="va">copied_app</span><span class="op">$</span><span class="fu">sync</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="reload-an-app">Reload an app<a class="anchor" aria-label="anchor" href="#reload-an-app"></a>
</h4>
<p>To keep your local <code>App</code> object up to date with the app on
the platform, you can always call the <code>reload()</code>
function:</p>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Reload an app object</span></span>
<span><span class="va">my_app</span><span class="op">$</span><span class="fu">reload</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="tasks">Tasks<a class="anchor" aria-label="anchor" href="#tasks"></a>
</h2>
<p>All task related operations are grouped under the <code>Tasks</code>
class within the authentication object, which also inherits the
<code>Resource</code> class and implements <code>query()</code>,
<code><a href="https://rdrr.io/r/base/get.html" class="external-link">get()</a></code> and <code>delete()</code> operations for listing
tasks, fetching single task and deleting tasks. Besides these, users are
able to create new tasks with the <code>create()</code> operation from
this <code>Auth$tasks</code> path.</p>
<p>When you operate with a single task, it is represented as an object
of the <code>Task</code> class. The <code>Task</code> object contains
all task information and additional methods that can be executed
directly on the object such as running, aborting, cloning, updating,
deleting the task, etc.</p>
<div class="section level3">
<h3 id="list-tasks">List tasks<a class="anchor" aria-label="anchor" href="#list-tasks"></a>
</h3>
<p>As mentioned above, you can list your tasks by calling the
<code>tasks$query()</code> method from the authentication object. The
method has many additional query parameters that could allow you to
search for tasks by specific criteria such as: <code>status</code>,
<code>parent</code>, <code>project</code>, <code>created_from</code>,
<code>created_to</code>, <code>started_from</code>,
<code>started_to</code>, <code>ended_from</code>, <code>ended_to</code>,
<code>order_by</code>, <code>order</code>, <code>origin_id</code>.</p>
<p>Let’s list all tasks that were completed:</p>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Query all tasks</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">tasks</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Query tasks by their status</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">tasks</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span>status <span class="op">=</span> <span class="st">"COMPLETED"</span>, limit <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p>To list all the tasks in a project, use the following.</p>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Find the project and pass it in the project parameter</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">projects</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"&lt;project_id&gt;"</span><span class="op">)</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">tasks</span><span class="op">$</span><span class="fu">query</span><span class="op">(</span>project <span class="op">=</span> <span class="va">p</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Alternatively you can list all tasks directly from the Project object</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">projects</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"&lt;project_id&gt;"</span><span class="op">)</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="fu">list_tasks</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Similar to previous query methods, here you will also get the
<code>Collection</code> object where resulting tasks will be stored in
the <code>items</code> fields and you can use pagination to navigate
through results.</p>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level3">
<h3 id="get-single-task-information">Get single task information<a class="anchor" aria-label="anchor" href="#get-single-task-information"></a>
</h3>
<p>In order to retrieve information about a single task of interest, you
can get it using the <code>tasks$get()</code> method using its id as
parameter.</p>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get specific task by ID</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="va">tasks</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"&lt;task_id&gt;"</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level3">
<h3 id="create-a-draft-task">Create a draft task<a class="anchor" aria-label="anchor" href="#create-a-draft-task"></a>
</h3>
<p>To create a new draft task, you can use the <code>tasks$create</code>
method. The method accepts various arguments such as: in which project
to create a task, which app and its revision to use, task name,
description, which inputs it requires, batching options, execution
settings, etc.</p>
<p>However, we can create a draft task by only defining the project and
the app that will be run, since all other parameters are optional:</p>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a draft task</span></span>
<span><span class="va">draft_task</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">tasks</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span></span>
<span>  project <span class="op">=</span> <span class="st">"&lt;project_object_or_id&gt;"</span>,</span>
<span>  app <span class="op">=</span> <span class="st">"&lt;app_object_or_id&gt;"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>This will create an empty task, without any parameter defined. User
has the option to set execution settings by using
<code>execution_settings</code> parameter, and also to define usage of
interruptible instances through <code>use_interruptible_instances</code>
parameter.</p>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create task with execution settings and with use of interruptible instances</span></span>
<span><span class="va">execution_settings</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"instance_type"</span> <span class="op">=</span> <span class="st">"c4.2xlarge;ebs-gp2;2000"</span>,</span>
<span>  <span class="st">"max_parallel_instances"</span> <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  <span class="st">"use_memoization"</span> <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="st">"use_elastic_disk"</span> <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">task_exec_settings</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">tasks</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span></span>
<span>  project <span class="op">=</span> <span class="st">"&lt;project_object_or_id&gt;"</span>,</span>
<span>  app <span class="op">=</span> <span class="st">"&lt;app_object_or_id&gt;"</span>,</span>
<span>  execution_settings <span class="op">=</span> <span class="va">execution_settings</span>,</span>
<span>  use_interruptible_instances <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span><span class="op">)</span></span></code></pre></div>
<p>To run the app immediately after it was created we have
<code>action</code> parameter, which when set to <code>run</code> will
start the analysis task when it’s created.</p>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create and run task</span></span>
<span><span class="va">task_exec_settings</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">tasks</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span></span>
<span>  project <span class="op">=</span> <span class="st">"&lt;project_object_or_id&gt;"</span>,</span>
<span>  app <span class="op">=</span> <span class="st">"&lt;app_object_or_id&gt;"</span>,</span>
<span>  input <span class="op">=</span> <span class="st">"&lt;inputs&gt;"</span>,</span>
<span>  action <span class="op">=</span> <span class="st">"run"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level3">
<h3 id="create-a-batch-task">Create a batch task<a class="anchor" aria-label="anchor" href="#create-a-batch-task"></a>
</h3>
<p>To run tasks in batch mode we have <code>batch</code>,
<code>batch_input</code> and <code>batch_by</code> parameters. The
<code>batch</code> parameter defines whether to run a batch task or not,
while <code>batch_input</code> and <code>batch_by</code> define the
input by which the task will be batched and by which criteria,
respectively.</p>
<p>The example below shows the format of creating a batch task for an
input file named ‘reads’, with batch criteria set to the ‘sample_id’
metadata field:</p>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a draft task</span></span>
<span><span class="va">batch_task</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">tasks</span><span class="op">$</span><span class="fu">create</span><span class="op">(</span></span>
<span>  project <span class="op">=</span> <span class="st">"&lt;project_object_or_id&gt;"</span>,</span>
<span>  app <span class="op">=</span> <span class="st">"&lt;app_object_or_id&gt;"</span>,</span>
<span>  inputs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"reads"</span> <span class="op">=</span> <span class="st">"&lt;reads_file_object_or_id&gt;"</span>,</span>
<span>    <span class="st">"reference"</span> <span class="op">=</span> <span class="st">"&lt;reference_file_object_or_id&gt;"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  batch <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  batch_input <span class="op">=</span> <span class="st">"reads"</span>,</span>
<span>  batch_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    type <span class="op">=</span> <span class="st">"CRITERIA"</span>,</span>
<span>    criteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"metadata.sample_id"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level3">
<h3 id="task-operations">Task operations<a class="anchor" aria-label="anchor" href="#task-operations"></a>
</h3>
<p>Once you’ve fetched the <code>Task</code> object, you can execute
various operations directly on it.</p>
<div class="section level4">
<h4 id="print-task">Print task<a class="anchor" aria-label="anchor" href="#print-task"></a>
</h4>
<p>To print all task details, call the print() method directly on the
<code>Task</code> object:</p>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Print task details</span></span>
<span><span class="va">draft_task</span><span class="op">$</span><span class="fu">print</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>── Task ─────────────────────────────────────────────────────────────────────
• batch: FALSE
• end_time: 2023-11-22T16:58:16Z
• start_time: 2023-11-22T16:51:35Z
• executed_by: &lt;username&gt;
• created_by: &lt;username&gt;
• app: &lt;username_or_division&gt;/api-testing/rna-seq-alignment-star/0
• project: &lt;username_or_division&gt;/api-testing
• description: STAR test 2
• status: COMPLETED
• name: Star-alignment-task
• id: 66f7a639-85fb-4594-aa93-d435ra37fb1b
• href: https://api.sbgenomics.com/v2/tasks/66f7a639-85fb-4594-aa93-d435ra37fb1b</code></pre>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="run-a-task">Run a task<a class="anchor" aria-label="anchor" href="#run-a-task"></a>
</h4>
<p>To actually start the execution of a created draft task, use the task
object’s <code>run()</code> function. You can modify input parameters
values for: <code>in_place</code> - set to FALSE if you wish to store
response in new task object, <code>batch</code> - this is used for tasks
that are already batch tasks and this option allows the users to switch
the batch mode off, <code>use_interruptible_instances</code> - This
field can be TRUE or FALSE. Set this field to TRUE to allow the use of
spot instances.</p>
<p>Only tasks with a <code>DRAFT</code> status may be run.</p>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Run a task</span></span>
<span><span class="va">draft_task</span><span class="op">$</span><span class="fu">run</span><span class="op">(</span>in_place <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="abort-a-task">Abort a task<a class="anchor" aria-label="anchor" href="#abort-a-task"></a>
</h4>
<p>Users can abort the task execution by calling the
<code>abort()</code> function. It immediately stops the execution and
puts it into <code>ABORT</code> status. Only tasks whose status is
<code>RUNNING</code> may be aborted.</p>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Abort a task</span></span>
<span><span class="va">draft_task</span><span class="op">$</span><span class="fu">abort</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="clone-a-task">Clone a task<a class="anchor" aria-label="anchor" href="#clone-a-task"></a>
</h4>
<p>In order to copy a task, the user can clone it. Once cloned, the task
can either be in <code>DRAFT</code> mode or immediately run, by setting
the <code>run</code> parameter to <code>TRUE</code>.</p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Clone a task</span></span>
<span><span class="va">cloned_task</span> <span class="op">&lt;-</span> <span class="va">draft_task</span><span class="op">$</span><span class="fu">clone_task</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="get-execution-details">Get execution details<a class="anchor" aria-label="anchor" href="#get-execution-details"></a>
</h4>
<p>If users would like to explore or debug the logs of task execution,
they can use the <code>get_execution_details()</code> function. It
returns execution details of the specified task and breaks down the
information into the task’s distinct jobs. A job is a single subprocess
carried out in a task. The information returned by this call is broadly
similar to the one that can be found in the task stats and logs provided
on the Platform. Task execution details include the following
information:</p>
<ul>
<li>The name of the command line job that executed</li>
<li>The start time of the job</li>
<li>End time of the job (if it completed)</li>
<li>The status of the job (<code>DONE</code>, <code>FAILED</code>, or
<code>RUNNING</code>)</li>
<li>Information on the computational instance that the job was run on,
including the provider ID, the type of instance used and the cloud
service provider</li>
<li>A link that can be used to download the standard error logs for the
job</li>
<li>SHA hash of the Docker image (‘checksum’).</li>
</ul>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get execution details of the task</span></span>
<span><span class="va">details</span> <span class="op">&lt;-</span> <span class="va">draft_task</span><span class="op">$</span><span class="fu">get_execution_details</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="list-batch-children">List batch children<a class="anchor" aria-label="anchor" href="#list-batch-children"></a>
</h4>
<p>This operation retrieves child tasks for a batch task. It works just
like the <code>tasks$query()</code> function, so you can set query
parameters such as <code>status</code>, <code>created_from</code>,
<code>created_to</code>, <code>started_from</code>,
<code>started_to</code>, <code>ended_from</code>, <code>ended_to</code>,
<code>origin</code>, and <code>order</code> to narrow down the
search.</p>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List batch children</span></span>
<span><span class="va">children_tasks</span> <span class="op">&lt;-</span> <span class="va">batch_task</span><span class="op">$</span><span class="fu">list_batch_children</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="update-task">Update task<a class="anchor" aria-label="anchor" href="#update-task"></a>
</h4>
<p>Users can use the <code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code> method to change the details
of the specified task, including its name, description, and inputs. Note
that you can only modify tasks with a task status of <code>DRAFT</code>.
Tasks which are <code>RUNNING</code>, <code>QUEUED</code>,
<code>ABORTED</code>, <code>COMPLETED</code> or <code>FAILED</code>
cannot be modified in order to enable the reproducibility of
analyses.</p>
<p>There are two things to note if you are editing a batch task:</p>
<ul>
<li>If you want to change the input on which to batch and the batch
criteria, you need to specify the <code>batch_input</code> and
<code>batch_by</code> parameters together in the same function
call.</li>
<li>If you want to disable batching on a task, set <code>batch</code> to
false. Or, you can also set the parameters <code>batch_input</code> and
<code>batch_by</code> to <code>NULL</code>.</li>
</ul>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Update task</span></span>
<span><span class="va">draft_task</span><span class="op">$</span><span class="fu">update</span><span class="op">(</span></span>
<span>  description <span class="op">=</span> <span class="st">"New description"</span>,</span>
<span>  batch_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    type <span class="op">=</span> <span class="st">"CRITERIA"</span>,</span>
<span>    criteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"metadata.diagnosis"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  inputs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"in_reads"</span> <span class="op">=</span> <span class="st">"&lt;some_other_file_object_or_id&gt;"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="rerun-a-task">Rerun a task<a class="anchor" aria-label="anchor" href="#rerun-a-task"></a>
</h4>
<p>Users can also rerun the task which will actually clone the original
task for them and start the execution immediately.</p>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Rerun task</span></span>
<span><span class="va">draft_task</span><span class="op">$</span><span class="fu">rerun</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="reload-task">Reload task<a class="anchor" aria-label="anchor" href="#reload-task"></a>
</h4>
<p>In order to refresh the <code>Task</code> object and get the up to
date info about its status, you can always call the
<code>reload()</code> function:</p>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Reload task object</span></span>
<span><span class="va">draft_task</span><span class="op">$</span><span class="fu">reload</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
<div class="section level4">
<h4 id="delete-task">Delete task<a class="anchor" aria-label="anchor" href="#delete-task"></a>
</h4>
<p>Lastly, the task can be deleted using <code>delete()</code> method
directly on the <code>Task</code> object too:</p>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Delete task</span></span>
<span><span class="va">draft_task</span><span class="op">$</span><span class="fu">delete</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div align="right">
<a href="#top">top</a>
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Vladimir Obucina, Marko Trifunovic, Marija Jovanovic, Seven Bridges Genomics Inc..</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
